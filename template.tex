% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\newsavebox\pandoc@box
\newcommand*\pandocbounded[1]{% scales image to fit in text height/width
  \sbox\pandoc@box{#1}%
  \Gscale@div\@tempa{\textheight}{\dimexpr\ht\pandoc@box+\dp\pandoc@box\relax}%
  \Gscale@div\@tempb{\linewidth}{\wd\pandoc@box}%
  \ifdim\@tempb\p@<\@tempa\p@\let\@tempa\@tempb\fi% select the smaller of both
  \ifdim\@tempa\p@<\p@\scalebox{\@tempa}{\usebox\pandoc@box}%
  \else\usebox{\pandoc@box}%
  \fi%
}
% Set default figure placement to htbp
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={Visualizing the Uninsured: A Data Science Perspective on U.S. Health Coverage},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{Visualizing the Uninsured: A Data Science Perspective on U.S.
Health Coverage}
\author{Eduardo Sáenz-Messía Laborda\\
Catherina Mikhail (2847118)\\
Charlotte Craenen (2865572)\\
Hugo van As\\
Indy Pleijter\\
Julian Zeguers\\
Wies Polderman\\
Tutorial group 5, group 4 -- J.F. Fitzgerald}
\date{2025-06-24}

\begin{document}
\maketitle

\section{Part 1 -- Identify a Social
Problem}\label{part-1-identify-a-social-problem}

\subsection{1.1 Describe the Social
Problem}\label{describe-the-social-problem}

The high number of uninsured Americans is a persistent issue with
substantial social and economic consequences. According to the U.S.
Census Bureau, over 27 million Americans lacked health insurance in
2022. This lack of coverage can lead to delayed medical care, poor
health outcomes, and financial instability.

\subsection{1.2 Provide Background on the
Problem}\label{provide-background-on-the-problem}

Since the implementation of the Affordable Care Act (ACA) in 2010, the
number of uninsured has decreased, but disparities remain. People with
low income, people of color, and those living in states that did not
expand Medicaid are disproportionately affected. Health insurance in the
U.S. is often tied to employment, further complicating access for those
in part-time, temporary, or informal jobs.

\section{Part 2 -- Describe and Acquire
Data}\label{part-2-describe-and-acquire-data}

\subsection{2.1 Describe the Dataset}\label{describe-the-dataset}

The dataset used is derived from the United States Census Bureau and
includes individual-level data on health insurance coverage,
demographics, and employment status.

\subsection{2.2 Import and Prepare the
Dataset}\label{import-and-prepare-the-dataset}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# The first dataset is from the dataset "selected characteristics of the uninsured in the US from 2010{-}2023, exclduing 2020 from the US Census Bureau. These are the ACS one{-}year estimates.}

\CommentTok{\#2010}
\NormalTok{ACSST1Y2010\_S2702\_2025\_06\_03T123607 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2010.S2702{-}2025{-}06{-}03T123607.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (193): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (16): District of Columbia!!Total Civilian Noninstitutionalized Populat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2010 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2010.S2702{-}2025{-}06{-}03T123607.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (193): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (16): District of Columbia!!Total Civilian Noninstitutionalized Populat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#2011}
\NormalTok{ACSST1Y2011\_S2702\_2025\_06\_03T123539 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2011.S2702{-}2025{-}06{-}03T123539.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (197): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (12): District of Columbia!!Total Civilian Noninstitutionalized Populat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2011 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2011.S2702{-}2025{-}06{-}03T123539.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (197): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (12): District of Columbia!!Total Civilian Noninstitutionalized Populat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#2012}
\NormalTok{ACSST1Y2012\_S2702\_2025\_06\_03T123441 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2012.S2702{-}2025{-}06{-}03T123441.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (197): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (12): District of Columbia!!Total Civilian Noninstitutionalized Populat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2012 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2012.S2702{-}2025{-}06{-}03T123441.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (197): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (12): District of Columbia!!Total Civilian Noninstitutionalized Populat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#2013}
\NormalTok{ACSST1Y2013\_S2702\_2025\_06\_03T123404 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2013.S2702{-}2025{-}06{-}03T123404.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (197): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (12): District of Columbia!!Total Civilian Noninstitutionalized Populat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2013 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2013.S2702{-}2025{-}06{-}03T123404.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (197): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (12): District of Columbia!!Total Civilian Noninstitutionalized Populat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#2014}
\NormalTok{ACSST1Y2014\_S2702\_2025\_06\_03T123336 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2014.S2702{-}2025{-}06{-}03T123336.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (193): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (16): District of Columbia!!Total Civilian Noninstitutionalized Populat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2014 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2014.S2702{-}2025{-}06{-}03T123336.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (193): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (16): District of Columbia!!Total Civilian Noninstitutionalized Populat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#2015}
\NormalTok{ACSST1Y2015\_S2702\_2025\_06\_03T123312 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2015.S2702{-}2025{-}06{-}03T123312.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (28): Delaware!!Total Civilian Noninstitutionalized Population!!Estimat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2015 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2015.S2702{-}2025{-}06{-}03T123312.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (28): Delaware!!Total Civilian Noninstitutionalized Population!!Estimat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#2016}
\NormalTok{ACSST1Y2016\_S2702\_2025\_06\_03T123232 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2016.S2702{-}2025{-}06{-}03T123232.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (28): Delaware!!Total Civilian Noninstitutionalized Population!!Estimat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2016 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2016.S2702{-}2025{-}06{-}03T123232.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total Civilian Noninstitutionalized Po...
## lgl  (28): Delaware!!Total Civilian Noninstitutionalized Population!!Estimat...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#2017}
\NormalTok{ACSST1Y2017\_S2702\_2025\_06\_03T123200 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2017.S2702{-}2025{-}06{-}03T123200.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total!!Estimate, Alabama!!Total!!Margi...
## lgl  (28): Delaware!!Total!!Estimate, Delaware!!Total!!Margin of Error, Dela...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2017 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2017.S2702{-}2025{-}06{-}03T123200.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total!!Estimate, Alabama!!Total!!Margi...
## lgl  (28): Delaware!!Total!!Estimate, Delaware!!Total!!Margin of Error, Dela...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#2018}
\NormalTok{ACSST1Y2018\_S2702\_2025\_06\_03T123128 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2018.S2702{-}2025{-}06{-}03T123128.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (177): Label (Grouping), Alabama!!Total!!Estimate, Alabama!!Total!!Margi...
## lgl  (32): Delaware!!Total!!Estimate, Delaware!!Total!!Margin of Error, Dela...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2018 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2018.S2702{-}2025{-}06{-}03T123128.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (177): Label (Grouping), Alabama!!Total!!Estimate, Alabama!!Total!!Margi...
## lgl  (32): Delaware!!Total!!Estimate, Delaware!!Total!!Margin of Error, Dela...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#2019}
\NormalTok{ACSST1Y2019\_S2702\_2025\_06\_03T123018 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2019.S2702{-}2025{-}06{-}03T123018.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total!!Estimate, Alabama!!Total!!Margi...
## lgl  (28): Delaware!!Total!!Estimate, Delaware!!Total!!Margin of Error, Dela...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2019 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2019.S2702{-}2025{-}06{-}03T123018.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total!!Estimate, Alabama!!Total!!Margi...
## lgl  (28): Delaware!!Total!!Estimate, Delaware!!Total!!Margin of Error, Dela...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#2021}
\NormalTok{ACSST1Y2021\_S2702\_2025\_06\_03T122952 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2021.S2702{-}2025{-}06{-}03T122952.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total!!Estimate, Alabama!!Total!!Margi...
## lgl  (28): Delaware!!Total!!Estimate, Delaware!!Total!!Margin of Error, Dela...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2021 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2021.S2702{-}2025{-}06{-}03T122952.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total!!Estimate, Alabama!!Total!!Margi...
## lgl  (28): Delaware!!Total!!Estimate, Delaware!!Total!!Margin of Error, Dela...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#2022}
\NormalTok{ACSST1Y2022\_S2702\_2025\_06\_03T122917 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2022.S2702{-}2025{-}06{-}03T122917.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total!!Estimate, Alabama!!Total!!Margi...
## lgl  (28): Delaware!!Total!!Estimate, Delaware!!Total!!Margin of Error, Dela...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2022 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2022.S2702{-}2025{-}06{-}03T122917.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total!!Estimate, Alabama!!Total!!Margi...
## lgl  (28): Delaware!!Total!!Estimate, Delaware!!Total!!Margin of Error, Dela...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#2023}
\NormalTok{ACSST1Y2023\_S2702\_2025\_06\_04T165512 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2023.S2702{-}2025{-}06{-}04T165512.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total!!Estimate, Alabama!!Total!!Margi...
## lgl  (28): District of Columbia!!Total!!Estimate, District of Columbia!!Tota...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_uninsured\_population\_2023 }\OtherTok{=} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data insured population 2010{-}2023/ACSST1Y2023.S2702{-}2025{-}06{-}04T165512.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 120 Columns: 209
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr (181): Label (Grouping), Alabama!!Total!!Estimate, Alabama!!Total!!Margi...
## lgl  (28): District of Columbia!!Total!!Estimate, District of Columbia!!Tota...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}

\CommentTok{\#The second dataset is from the Bureau of Economic Analysis and is the annual real GDP of the 44 states we include in our analysis from the year 2009{-}2023, excluding 2020}
\NormalTok{Table\_GDP\_absolute\_values\_Table\_3\_ }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"data GDP/Table GDP absolute values {-} Table (3).csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 45 Columns: 15
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr  (1): GeoName
## dbl (14): 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, ...
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#renaming the table}
\NormalTok{table\_GDP }\OtherTok{=}\NormalTok{ Table\_GDP\_absolute\_values\_Table\_3\_}
\end{Highlighting}
\end{Shaded}

\subsection{Data cleaning: Datasets of Uninsured Population and The
Creation of The New Variable: The Uninsured
Share}\label{data-cleaning-datasets-of-uninsured-population-and-the-creation-of-the-new-variable-the-uninsured-share}

\begin{itemize}
\tightlist
\item
  describe here which states we first took out the margin of errors,
  then we took out the 6 small states and tell which states they are
  (deleware, district of columbia, hawaii, puerto rico, north dakota,
  rhode island, vermont and wyoming check de spelling!!), then that we
  took out the metadata and tell which metadata that is: age, sex, race
  and hispanic or latino origin, nativity and U.S. citizenship status,
  disability status, residence 1 year ago, educational attainment,
  employment status, work experience, civilian noninstitutionalized
  workers 16 years and over, earnings in the past 12 months and ratio of
  income to poverty level in the past 12 months. and that we only kept
  the total civilian noninstitutionalized population and household
  income (inflation adjusted). After that we coerced the character
  values in the yearly datasets no numeric and created our new variable
  of uninsured share. after that we combined all the yearly datasets
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# This is me cleaning out the data insured population from 2010{-}2016 getting out the margin of error}
\NormalTok{dataset\_uninsured\_population\_2010 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2010[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2010)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2010)}

\NormalTok{dataset\_uninsured\_population\_2011 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2011[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2011)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2011)}

\NormalTok{dataset\_uninsured\_population\_2012 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2012[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2012)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2012)}

\NormalTok{dataset\_uninsured\_population\_2013 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2013[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2013)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2013)}

\NormalTok{dataset\_uninsured\_population\_2014 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2014[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2014)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2014)}

\NormalTok{dataset\_uninsured\_population\_2015 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2015[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2015)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2015)}

\NormalTok{dataset\_uninsured\_population\_2016 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2016[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2016)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2016)}

\NormalTok{dataset\_uninsured\_population\_2017 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2017[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2017)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2017)}

\NormalTok{dataset\_uninsured\_population\_2018 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2018[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2018)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2018)}

\NormalTok{dataset\_uninsured\_population\_2019 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2019[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2019)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2019)}

\NormalTok{dataset\_uninsured\_population\_2021 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2021[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2021)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2021)}

\NormalTok{dataset\_uninsured\_population\_2022 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2022[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2022)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2022)}

\NormalTok{dataset\_uninsured\_population\_2023 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2023[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Margin of Error"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2023)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2023)}

\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}

\CommentTok{\#This is me cleaning out the columns of Delaware}
\NormalTok{dataset\_uninsured\_population\_2010 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2010[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2010)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2010)}

\NormalTok{dataset\_uninsured\_population\_2011 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2011[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2011)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2011)}

\NormalTok{dataset\_uninsured\_population\_2012 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2012[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2012)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2012)}

\NormalTok{dataset\_uninsured\_population\_2013 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2013[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2013)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2013)}

\NormalTok{dataset\_uninsured\_population\_2014 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2014[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2014)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2014)}

\NormalTok{dataset\_uninsured\_population\_2015 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2015[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2015)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2015)}

\NormalTok{dataset\_uninsured\_population\_2016 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2016[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2016)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2016)}

\NormalTok{dataset\_uninsured\_population\_2017 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2017[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2017)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2017)}

\NormalTok{dataset\_uninsured\_population\_2018 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2018[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2018)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2018)}

\NormalTok{dataset\_uninsured\_population\_2019 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2019[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2019)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2019)}

\NormalTok{dataset\_uninsured\_population\_2021 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2021[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2021)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2021)}

\NormalTok{dataset\_uninsured\_population\_2022 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2022[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2022)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2022)}

\NormalTok{dataset\_uninsured\_population\_2023 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2023[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Delaware"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2023)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2023)}

\CommentTok{\#This is me cleaning out the columns of District of Columbia}
\NormalTok{dataset\_uninsured\_population\_2011 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2011[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"District of Columbia"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2011)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2011)}

\NormalTok{dataset\_uninsured\_population\_2012 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2012[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"District of Columbia"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2012)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2012)}

\NormalTok{dataset\_uninsured\_population\_2013 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2013[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"District of Columbia"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2013)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2013)}

\NormalTok{dataset\_uninsured\_population\_2014 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2014[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"District of Columbia"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2014)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2014)}

\NormalTok{dataset\_uninsured\_population\_2015 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2015[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"District of Columbia"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2015)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2015)}

\NormalTok{dataset\_uninsured\_population\_2016 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2016[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"District of Columbia"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2016)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2016)}

\NormalTok{dataset\_uninsured\_population\_2017 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2017[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"District of Columbia"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2017)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2017)}

\NormalTok{dataset\_uninsured\_population\_2018 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2018[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"District of Columbia"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2018)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2018)}

\NormalTok{dataset\_uninsured\_population\_2019 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2019[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"District of Columbia"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2019)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2019)}

\NormalTok{dataset\_uninsured\_population\_2021 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2021[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"District of Columbia"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2021)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2021)}

\NormalTok{dataset\_uninsured\_population\_2022 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2022[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"District of Columbia"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2022)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2022)}

\NormalTok{dataset\_uninsured\_population\_2023 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2023[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"District of Columbia"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2023)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2023)}

\CommentTok{\#This is me cleaning out the columns of Hawaii}
\NormalTok{dataset\_uninsured\_population\_2010 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2010[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2010)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2010)}

\NormalTok{dataset\_uninsured\_population\_2011 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2011[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2011)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2011)}

\NormalTok{dataset\_uninsured\_population\_2012 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2012[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2012)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2012)}

\NormalTok{dataset\_uninsured\_population\_2013 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2013[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2013)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2013)}

\NormalTok{dataset\_uninsured\_population\_2014 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2014[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2014)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2014)}

\NormalTok{dataset\_uninsured\_population\_2015 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2015[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2015)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2015)}

\NormalTok{dataset\_uninsured\_population\_2016 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2016[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2016)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2016)}

\NormalTok{dataset\_uninsured\_population\_2017 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2017[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2017)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2017)}

\NormalTok{dataset\_uninsured\_population\_2018 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2018[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2018)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2018)}

\NormalTok{dataset\_uninsured\_population\_2019 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2019[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2019)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2019)}

\NormalTok{dataset\_uninsured\_population\_2021 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2021[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2021)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2021)}

\NormalTok{dataset\_uninsured\_population\_2022 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2022[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2022)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2022)}

\NormalTok{dataset\_uninsured\_population\_2023 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2023[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Hawaii"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2023)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2023)}
\CommentTok{\#This is me cleaning out the columns of North Dakota}
\NormalTok{dataset\_uninsured\_population\_2010 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2010[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2010)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2010)}

\NormalTok{dataset\_uninsured\_population\_2011 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2011[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2011)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2011)}

\NormalTok{dataset\_uninsured\_population\_2012 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2012[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2012)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2012)}

\NormalTok{dataset\_uninsured\_population\_2013 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2013[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2013)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2013)}

\NormalTok{dataset\_uninsured\_population\_2014 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2014[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2014)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2014)}

\NormalTok{dataset\_uninsured\_population\_2015 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2015[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2015)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2015)}

\NormalTok{dataset\_uninsured\_population\_2016 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2016[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2016)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2016)}

\NormalTok{dataset\_uninsured\_population\_2017 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2017[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2017)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2017)}

\NormalTok{dataset\_uninsured\_population\_2018 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2018[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2018)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2018)}

\NormalTok{dataset\_uninsured\_population\_2019 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2019[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2019)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2019)}

\NormalTok{dataset\_uninsured\_population\_2021 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2021[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2021)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2021)}

\NormalTok{dataset\_uninsured\_population\_2022 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2022[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2022)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2022)}

\NormalTok{dataset\_uninsured\_population\_2023 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2023[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"North Dakota"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2023)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2023)}
\CommentTok{\#This is me cleaning out the columns of Puerto Rico}
\NormalTok{dataset\_uninsured\_population\_2010 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2010[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2010)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2010)}

\NormalTok{dataset\_uninsured\_population\_2011 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2011[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2011)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2011)}

\NormalTok{dataset\_uninsured\_population\_2012 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2012[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2012)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2012)}

\NormalTok{dataset\_uninsured\_population\_2013 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2013[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2013)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2013)}

\NormalTok{dataset\_uninsured\_population\_2014 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2014[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2014)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2014)}

\NormalTok{dataset\_uninsured\_population\_2015 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2015[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2015)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2015)}

\NormalTok{dataset\_uninsured\_population\_2016 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2016[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2016)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2016)}

\NormalTok{dataset\_uninsured\_population\_2017 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2017[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2017)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2017)}

\NormalTok{dataset\_uninsured\_population\_2018 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2018[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2018)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2018)}

\NormalTok{dataset\_uninsured\_population\_2019 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2019[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2019)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2019)}

\NormalTok{dataset\_uninsured\_population\_2021 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2021[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2021)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2021)}

\NormalTok{dataset\_uninsured\_population\_2022 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2022[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2022)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2022)}

\NormalTok{dataset\_uninsured\_population\_2023 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2023[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Puerto Rico"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2023)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2023)}
\CommentTok{\#This is me cleaning out the columns of Rhode Island}
\NormalTok{dataset\_uninsured\_population\_2010 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2010[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2010)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2010)}

\NormalTok{dataset\_uninsured\_population\_2011 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2011[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2011)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2011)}

\NormalTok{dataset\_uninsured\_population\_2012 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2012[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2012)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2012)}

\NormalTok{dataset\_uninsured\_population\_2013 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2013[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2013)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2013)}

\NormalTok{dataset\_uninsured\_population\_2014 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2014[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2014)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2014)}

\NormalTok{dataset\_uninsured\_population\_2015 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2015[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2015)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2015)}

\NormalTok{dataset\_uninsured\_population\_2016 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2016[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2016)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2016)}

\NormalTok{dataset\_uninsured\_population\_2017 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2017[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2017)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2017)}

\NormalTok{dataset\_uninsured\_population\_2018 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2018[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2018)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2018)}

\NormalTok{dataset\_uninsured\_population\_2019 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2019[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2019)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2019)}

\NormalTok{dataset\_uninsured\_population\_2021 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2021[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2021)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2021)}

\NormalTok{dataset\_uninsured\_population\_2022 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2022[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2022)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2022)}

\NormalTok{dataset\_uninsured\_population\_2023 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2023[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Rhode Island"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2023)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2023)}
\CommentTok{\#This is me cleaning out the columns of Vermont}
\NormalTok{dataset\_uninsured\_population\_2010 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2010[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2010)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2010)}

\NormalTok{dataset\_uninsured\_population\_2011 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2011[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2011)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2011)}

\NormalTok{dataset\_uninsured\_population\_2012 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2012[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2012)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2012)}

\NormalTok{dataset\_uninsured\_population\_2013 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2013[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2013)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2013)}

\NormalTok{dataset\_uninsured\_population\_2014 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2014[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2014)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2014)}

\NormalTok{dataset\_uninsured\_population\_2015 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2015[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2015)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2015)}

\NormalTok{dataset\_uninsured\_population\_2016 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2016[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2016)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2016)}

\NormalTok{dataset\_uninsured\_population\_2017 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2017[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2017)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2017)}

\NormalTok{dataset\_uninsured\_population\_2018 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2018[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2018)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2018)}

\NormalTok{dataset\_uninsured\_population\_2019 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2019[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2019)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2019)}

\NormalTok{dataset\_uninsured\_population\_2021 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2021[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2021)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2021)}

\NormalTok{dataset\_uninsured\_population\_2022 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2022[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2022)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2022)}

\NormalTok{dataset\_uninsured\_population\_2023 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2023[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Vermont"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2023)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2023)}
\CommentTok{\#This is me cleaning out the columns of Wyoming}
\NormalTok{dataset\_uninsured\_population\_2010 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2010[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2010)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2010)}

\NormalTok{dataset\_uninsured\_population\_2011 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2011[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2011)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2011)}

\NormalTok{dataset\_uninsured\_population\_2012 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2012[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2012)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2012)}

\NormalTok{dataset\_uninsured\_population\_2013 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2013[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2013)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2013)}

\NormalTok{dataset\_uninsured\_population\_2014 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2014[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2014)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2014)}

\NormalTok{dataset\_uninsured\_population\_2015 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2015[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2015)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2015)}

\NormalTok{dataset\_uninsured\_population\_2016 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2016[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2016)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2016)}

\NormalTok{dataset\_uninsured\_population\_2017 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2017[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2017)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2017)}

\NormalTok{dataset\_uninsured\_population\_2018 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2018[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2018)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2018)}

\NormalTok{dataset\_uninsured\_population\_2019 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2019[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2019)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2019)}

\NormalTok{dataset\_uninsured\_population\_2021 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2021[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2021)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2021)}

\NormalTok{dataset\_uninsured\_population\_2022 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2022[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2022)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2022)}

\NormalTok{dataset\_uninsured\_population\_2023 }\OtherTok{=}\NormalTok{ dataset\_uninsured\_population\_2023[, }\FunctionTok{which}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Wyoming"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2023)))]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2023)}

\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}

\CommentTok{\#Now we are cleaning out the unnecessary metadata in the rows}
\CommentTok{\#this is me cleaning out the rows with unnecessary metadata and keeping household income levels and the total population numbers}
\NormalTok{dataset\_uninsured\_population\_2010 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2010[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2010)}

\NormalTok{dataset\_uninsured\_population\_2011 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2011[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2011)}

\NormalTok{dataset\_uninsured\_population\_2012 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2012[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2012)}

\NormalTok{dataset\_uninsured\_population\_2013 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2013[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2013)}

\NormalTok{dataset\_uninsured\_population\_2014 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2014[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2014)}

\NormalTok{dataset\_uninsured\_population\_2015 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2015[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2015)}

\NormalTok{dataset\_uninsured\_population\_2016 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2016[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2016)}

\NormalTok{dataset\_uninsured\_population\_2017 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2017[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2017)}

\NormalTok{dataset\_uninsured\_population\_2018 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2018[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2018)}

\NormalTok{dataset\_uninsured\_population\_2019 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2019[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2019)}

\NormalTok{dataset\_uninsured\_population\_2021 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2021[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2021)}

\NormalTok{dataset\_uninsured\_population\_2022 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2022[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2022)}

\NormalTok{dataset\_uninsured\_population\_2023 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2023[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{104}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2023)}

\NormalTok{dataset\_uninsured\_population\_2010 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2010[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2010)}

\NormalTok{dataset\_uninsured\_population\_2011 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2011[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2011)}

\NormalTok{dataset\_uninsured\_population\_2012 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2012[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2012)}

\NormalTok{dataset\_uninsured\_population\_2013 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2013[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2013)}

\NormalTok{dataset\_uninsured\_population\_2014 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2014[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2014)}

\NormalTok{dataset\_uninsured\_population\_2015 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2015[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2015)}

\NormalTok{dataset\_uninsured\_population\_2016 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2016[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2016)}

\NormalTok{dataset\_uninsured\_population\_2017 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2017[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2017)}

\NormalTok{dataset\_uninsured\_population\_2018 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2018[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2018)}

\NormalTok{dataset\_uninsured\_population\_2019 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2019[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2019)}

\NormalTok{dataset\_uninsured\_population\_2021 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2021[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2021)}

\NormalTok{dataset\_uninsured\_population\_2022 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2022[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2022)}

\NormalTok{dataset\_uninsured\_population\_2023 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2023[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{10}\SpecialCharTok{:}\DecValTok{17}\NormalTok{),]}
\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2023)}

\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}

\CommentTok{\#As the values in these yearly datasets are stored as characters, we are now going to coerce them into numeric values so that we can create a new variable afterwards.}
\CommentTok{\#The values in the datasets of the uninsured population are stored as characters. Here I am going to get rid of "" so I can store them as numeric.}

\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2010[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2010[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2010\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2010[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2010\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2010\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2010\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2010)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2010\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2010\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2010\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2011[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2011\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2011[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2011\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2011\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2011\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2011)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2011\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2011\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2011\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2012[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2012\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2012[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2012\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2012\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2012\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2012)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2012\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2012\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2012\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2013[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2013\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2013[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2013\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2013\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2013\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2013)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2013\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2013\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2013\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2014[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2014\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2014[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2014\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2014\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2014\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2014)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2014\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2014\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2014\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2015[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2015\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2015[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2015\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2015\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2015\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2015)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2015\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2015\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2015\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2016[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2016\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2016[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2016\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2016\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2016\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2016)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2016\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2016\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2016\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2017[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2017\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2017[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2017\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2017\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2017\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2017)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2017\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2017\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2017\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2018[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2018\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2018[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2018\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2018\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2018\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2018)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2018\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2018\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2018\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2019[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2019\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2019[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2019\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2019\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2019\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2019)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2019\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2019\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2019\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2021[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2021\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2021[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2021\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2021\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2021\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2021)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2021\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2021\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2021\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2022[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2022\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2022[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2022\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2022\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2022\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2022)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2022\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2022\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2022\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Keep the first column as{-}is}
\NormalTok{first\_col }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2023[[}\DecValTok{1}\NormalTok{]]}

\CommentTok{\# Clean and convert the rest of the columns}
\NormalTok{dataset\_uninsured\_population\_2023\_numeric }\OtherTok{\textless{}{-}} \FunctionTok{as.data.frame}\NormalTok{(}
  \FunctionTok{lapply}\NormalTok{(dataset\_uninsured\_population\_2023[ , }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], }\ControlFlowTok{function}\NormalTok{(col) \{}
\NormalTok{    cleaned }\OtherTok{\textless{}{-}} \FunctionTok{gsub}\NormalTok{(}\StringTok{"[}\SpecialCharTok{\textbackslash{}"}\StringTok{\%,]"}\NormalTok{, }\StringTok{""}\NormalTok{, col)}
    \FunctionTok{as.numeric}\NormalTok{(cleaned)}
\NormalTok{  \}),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\#Combine back with the first column}
\NormalTok{dataset\_uninsured\_population\_2023\_cleaned }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(first\_col, dataset\_uninsured\_population\_2023\_numeric)}

\CommentTok{\#rename the first column}
\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2023\_cleaned)[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2023)[}\DecValTok{1}\NormalTok{]}

\FunctionTok{View}\NormalTok{(dataset\_uninsured\_population\_2023\_cleaned)}
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2023\_cleaned)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "data.frame"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(dataset\_uninsured\_population\_2023\_cleaned[[}\DecValTok{2}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}

\CommentTok{\#Now that the values in the yearly datasets are stored as numeric values but the first column as the first column contains the names of the states, we can now create are first new variable, which is the uninsured share:}

\CommentTok{\#Here I am trying to compute and create a new variable, which is the share of uninsured population per state and per year}

\CommentTok{\# Copy original data 2010}
\NormalTok{df\_pop\_2010 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2010\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2010)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names  }\CommentTok{\# to control column ordering}

\CommentTok{\# Loop through all columns ending in "..Uninsured.Population..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Population}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract the state name — everything before the first ".."}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Define the total population column and the share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total.Civilian.Noninstitutionalized.Population..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Initialize new share column with NA}
\NormalTok{    df\_pop\_2010[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate only for first row}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(df\_pop\_2010[[total\_col]][}\DecValTok{1}\NormalTok{]) }\SpecialCharTok{\&\&}\NormalTok{ df\_pop\_2010[[total\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2010[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2010[[uninsured\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{/}\NormalTok{ df\_pop\_2010[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{      df\_pop\_2010[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
\NormalTok{    \}}
    
    \CommentTok{\# Insert new column right after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
    
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total population column not found for:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: District.of.Columbia 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder the columns}
\NormalTok{df\_pop\_2010 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2010[, new\_col\_order]}

\CommentTok{\# Preview: Show share columns for the first row}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured.Share$"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(df\_pop\_2010), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created share columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created share columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"             
##  [2] "Alaska..Uninsured.Share"              
##  [3] "Arizona..Uninsured.Share"             
##  [4] "Arkansas..Uninsured.Share"            
##  [5] "California..Uninsured.Share"          
##  [6] "Colorado..Uninsured.Share"            
##  [7] "Connecticut..Uninsured.Share"         
##  [8] "District.of.Columbia..Uninsured.Share"
##  [9] "Florida..Uninsured.Share"             
## [10] "Georgia..Uninsured.Share"             
## [11] "Idaho..Uninsured.Share"               
## [12] "Illinois..Uninsured.Share"            
## [13] "Indiana..Uninsured.Share"             
## [14] "Iowa..Uninsured.Share"                
## [15] "Kansas..Uninsured.Share"              
## [16] "Kentucky..Uninsured.Share"            
## [17] "Louisiana..Uninsured.Share"           
## [18] "Maine..Uninsured.Share"               
## [19] "Maryland..Uninsured.Share"            
## [20] "Massachusetts..Uninsured.Share"       
## [21] "Michigan..Uninsured.Share"            
## [22] "Minnesota..Uninsured.Share"           
## [23] "Mississippi..Uninsured.Share"         
## [24] "Missouri..Uninsured.Share"            
## [25] "Montana..Uninsured.Share"             
## [26] "Nebraska..Uninsured.Share"            
## [27] "Nevada..Uninsured.Share"              
## [28] "New.Hampshire..Uninsured.Share"       
## [29] "New.Jersey..Uninsured.Share"          
## [30] "New.Mexico..Uninsured.Share"          
## [31] "New.York..Uninsured.Share"            
## [32] "North.Carolina..Uninsured.Share"      
## [33] "Ohio..Uninsured.Share"                
## [34] "Oklahoma..Uninsured.Share"            
## [35] "Oregon..Uninsured.Share"              
## [36] "Pennsylvania..Uninsured.Share"        
## [37] "South.Carolina..Uninsured.Share"      
## [38] "South.Dakota..Uninsured.Share"        
## [39] "Tennessee..Uninsured.Share"           
## [40] "Texas..Uninsured.Share"               
## [41] "Utah..Uninsured.Share"                
## [42] "Virginia..Uninsured.Share"            
## [43] "Washington..Uninsured.Share"          
## [44] "West.Virginia..Uninsured.Share"       
## [45] "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2010[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1                0.1459974               0.1985349                 0.168796
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                 0.1745749                   0.1853812
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                 0.1591949                   0.09094912
##   District.of.Columbia..Uninsured.Share Florida..Uninsured.Share
## 1                                    NA                0.2126385
##   Georgia..Uninsured.Share Idaho..Uninsured.Share Illinois..Uninsured.Share
## 1                0.1970166              0.1774928                 0.1377355
##   Indiana..Uninsured.Share Iowa..Uninsured.Share Kansas..Uninsured.Share
## 1                0.1483102            0.09311871               0.1388666
##   Kentucky..Uninsured.Share Louisiana..Uninsured.Share Maine..Uninsured.Share
## 1                 0.1525064                  0.1781376              0.1013414
##   Maryland..Uninsured.Share Massachusetts..Uninsured.Share
## 1                  0.112669                     0.04410529
##   Michigan..Uninsured.Share Minnesota..Uninsured.Share
## 1                 0.1236607                 0.09067987
##   Mississippi..Uninsured.Share Missouri..Uninsured.Share
## 1                    0.1819194                 0.1316177
##   Montana..Uninsured.Share Nebraska..Uninsured.Share Nevada..Uninsured.Share
## 1                 0.173214                 0.1152316               0.2261925
##   New.Hampshire..Uninsured.Share New.Jersey..Uninsured.Share
## 1                      0.1113225                   0.1324153
##   New.Mexico..Uninsured.Share New.York..Uninsured.Share
## 1                   0.1960733                  0.119021
##   North.Carolina..Uninsured.Share Ohio..Uninsured.Share
## 1                       0.1677058             0.1231611
##   Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1                 0.1886081               0.1714887
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                     0.1016456                       0.1752929
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                     0.1238954                  0.1435505
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1              0.2371108             0.1534072                 0.1306617
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                   0.1424492                      0.1459719
##   Wisconsin..Uninsured.Share
## 1                 0.09427438
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{View}\NormalTok{(df\_pop\_2010)}

\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}

\CommentTok{\# Copy original data 2011}
\NormalTok{df\_pop\_2011 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2011\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2011)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names  }\CommentTok{\# to control column ordering}

\CommentTok{\# Loop through all columns ending in "..Uninsured.Population..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Population}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract the state name — everything before the first ".."}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Define the total population column and the share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total.Civilian.Noninstitutionalized.Population..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Initialize new share column with NA}
\NormalTok{    df\_pop\_2011[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate only for first row}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(df\_pop\_2011[[total\_col]][}\DecValTok{1}\NormalTok{]) }\SpecialCharTok{\&\&}\NormalTok{ df\_pop\_2011[[total\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2011[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2011[[uninsured\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{/}\NormalTok{ df\_pop\_2011[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{      df\_pop\_2011[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
\NormalTok{    \}}
    
    \CommentTok{\# Insert new column right after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
    
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total population column not found for:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder the columns}
\NormalTok{df\_pop\_2011 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2011[, new\_col\_order]}

\CommentTok{\# Preview: Show share columns for the first row}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured.Share$"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(df\_pop\_2011), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created share columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created share columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"        "Alaska..Uninsured.Share"        
##  [3] "Arizona..Uninsured.Share"        "Arkansas..Uninsured.Share"      
##  [5] "California..Uninsured.Share"     "Colorado..Uninsured.Share"      
##  [7] "Connecticut..Uninsured.Share"    "Florida..Uninsured.Share"       
##  [9] "Georgia..Uninsured.Share"        "Idaho..Uninsured.Share"         
## [11] "Illinois..Uninsured.Share"       "Indiana..Uninsured.Share"       
## [13] "Iowa..Uninsured.Share"           "Kansas..Uninsured.Share"        
## [15] "Kentucky..Uninsured.Share"       "Louisiana..Uninsured.Share"     
## [17] "Maine..Uninsured.Share"          "Maryland..Uninsured.Share"      
## [19] "Massachusetts..Uninsured.Share"  "Michigan..Uninsured.Share"      
## [21] "Minnesota..Uninsured.Share"      "Mississippi..Uninsured.Share"   
## [23] "Missouri..Uninsured.Share"       "Montana..Uninsured.Share"       
## [25] "Nebraska..Uninsured.Share"       "Nevada..Uninsured.Share"        
## [27] "New.Hampshire..Uninsured.Share"  "New.Jersey..Uninsured.Share"    
## [29] "New.Mexico..Uninsured.Share"     "New.York..Uninsured.Share"      
## [31] "North.Carolina..Uninsured.Share" "Ohio..Uninsured.Share"          
## [33] "Oklahoma..Uninsured.Share"       "Oregon..Uninsured.Share"        
## [35] "Pennsylvania..Uninsured.Share"   "South.Carolina..Uninsured.Share"
## [37] "South.Dakota..Uninsured.Share"   "Tennessee..Uninsured.Share"     
## [39] "Texas..Uninsured.Share"          "Utah..Uninsured.Share"          
## [41] "Virginia..Uninsured.Share"       "Washington..Uninsured.Share"    
## [43] "West.Virginia..Uninsured.Share"  "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2011[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1                 0.142787               0.2011521                0.1716779
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                 0.1706322                   0.1809817
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                 0.1511714                   0.08770097
##   Florida..Uninsured.Share Georgia..Uninsured.Share Idaho..Uninsured.Share
## 1                0.2085815                0.1957182              0.1654871
##   Illinois..Uninsured.Share Indiana..Uninsured.Share Iowa..Uninsured.Share
## 1                 0.1307751                0.1450422            0.08931007
##   Kansas..Uninsured.Share Kentucky..Uninsured.Share Louisiana..Uninsured.Share
## 1               0.1260445                 0.1443526                  0.1752746
##   Maine..Uninsured.Share Maryland..Uninsured.Share
## 1              0.1066606                 0.1043205
##   Massachusetts..Uninsured.Share Michigan..Uninsured.Share
## 1                     0.04255642                 0.1177909
##   Minnesota..Uninsured.Share Mississippi..Uninsured.Share
## 1                 0.08841631                    0.1773511
##   Missouri..Uninsured.Share Montana..Uninsured.Share Nebraska..Uninsured.Share
## 1                 0.1368738                0.1826408                 0.1141399
##   Nevada..Uninsured.Share New.Hampshire..Uninsured.Share
## 1               0.2191278                      0.1050122
##   New.Jersey..Uninsured.Share New.Mexico..Uninsured.Share
## 1                   0.1307364                   0.1984055
##   New.York..Uninsured.Share North.Carolina..Uninsured.Share
## 1                  0.114291                       0.1632918
##   Ohio..Uninsured.Share Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1             0.1191326                 0.1869208               0.1571703
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                     0.1008431                       0.1673434
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                     0.1190657                  0.1463977
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1               0.229779             0.1527304                 0.1246153
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                   0.1418275                      0.1490771
##   Wisconsin..Uninsured.Share
## 1                 0.08993048
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{View}\NormalTok{(df\_pop\_2011)}


\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}


\CommentTok{\# Copy original data 2012}
\NormalTok{df\_pop\_2012 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2012\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2012)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names  }\CommentTok{\# to control column ordering}

\CommentTok{\# Loop through all columns ending in "..Uninsured.Population..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Population}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract the state name — everything before the first ".."}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Define the total population column and the share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total.Civilian.Noninstitutionalized.Population..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Initialize new share column with NA}
\NormalTok{    df\_pop\_2012[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate only for first row}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(df\_pop\_2012[[total\_col]][}\DecValTok{1}\NormalTok{]) }\SpecialCharTok{\&\&}\NormalTok{ df\_pop\_2012[[total\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2012[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2012[[uninsured\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{/}\NormalTok{ df\_pop\_2012[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{      df\_pop\_2012[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
\NormalTok{    \}}
    
    \CommentTok{\# Insert new column right after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
    
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total population column not found for:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder the columns}
\NormalTok{df\_pop\_2012 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2012[, new\_col\_order]}

\CommentTok{\# Preview: Show share columns for the first row}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured.Share$"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(df\_pop\_2012), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created share columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created share columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"        "Alaska..Uninsured.Share"        
##  [3] "Arizona..Uninsured.Share"        "Arkansas..Uninsured.Share"      
##  [5] "California..Uninsured.Share"     "Colorado..Uninsured.Share"      
##  [7] "Connecticut..Uninsured.Share"    "Florida..Uninsured.Share"       
##  [9] "Georgia..Uninsured.Share"        "Idaho..Uninsured.Share"         
## [11] "Illinois..Uninsured.Share"       "Indiana..Uninsured.Share"       
## [13] "Iowa..Uninsured.Share"           "Kansas..Uninsured.Share"        
## [15] "Kentucky..Uninsured.Share"       "Louisiana..Uninsured.Share"     
## [17] "Maine..Uninsured.Share"          "Maryland..Uninsured.Share"      
## [19] "Massachusetts..Uninsured.Share"  "Michigan..Uninsured.Share"      
## [21] "Minnesota..Uninsured.Share"      "Mississippi..Uninsured.Share"   
## [23] "Missouri..Uninsured.Share"       "Montana..Uninsured.Share"       
## [25] "Nebraska..Uninsured.Share"       "Nevada..Uninsured.Share"        
## [27] "New.Hampshire..Uninsured.Share"  "New.Jersey..Uninsured.Share"    
## [29] "New.Mexico..Uninsured.Share"     "New.York..Uninsured.Share"      
## [31] "North.Carolina..Uninsured.Share" "Ohio..Uninsured.Share"          
## [33] "Oklahoma..Uninsured.Share"       "Oregon..Uninsured.Share"        
## [35] "Pennsylvania..Uninsured.Share"   "South.Carolina..Uninsured.Share"
## [37] "South.Dakota..Uninsured.Share"   "Tennessee..Uninsured.Share"     
## [39] "Texas..Uninsured.Share"          "Utah..Uninsured.Share"          
## [41] "Virginia..Uninsured.Share"       "Washington..Uninsured.Share"    
## [43] "West.Virginia..Uninsured.Share"  "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2012[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1                0.1333908               0.2049352                0.1755152
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                 0.1644548                   0.1788066
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                 0.1474541                   0.09109101
##   Florida..Uninsured.Share Georgia..Uninsured.Share Idaho..Uninsured.Share
## 1                0.2007167                0.1844061              0.1616716
##   Illinois..Uninsured.Share Indiana..Uninsured.Share Iowa..Uninsured.Share
## 1                 0.1277695                0.1428998            0.08395062
##   Kansas..Uninsured.Share Kentucky..Uninsured.Share Louisiana..Uninsured.Share
## 1               0.1258448                  0.138714                  0.1688479
##   Maine..Uninsured.Share Maryland..Uninsured.Share
## 1              0.1023856                 0.1032367
##   Massachusetts..Uninsured.Share Michigan..Uninsured.Share
## 1                     0.03872404                 0.1140256
##   Minnesota..Uninsured.Share Mississippi..Uninsured.Share
## 1                 0.07982694                    0.1704733
##   Missouri..Uninsured.Share Montana..Uninsured.Share Nebraska..Uninsured.Share
## 1                 0.1356255                0.1802464                 0.1125484
##   Nevada..Uninsured.Share New.Hampshire..Uninsured.Share
## 1               0.2215245                      0.1063088
##   New.Jersey..Uninsured.Share New.Mexico..Uninsured.Share
## 1                   0.1270832                   0.1842212
##   New.York..Uninsured.Share North.Carolina..Uninsured.Share
## 1                 0.1088647                       0.1656357
##   Ohio..Uninsured.Share Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1             0.1146917                  0.183516               0.1492077
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                    0.09750922                       0.1683219
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                      0.115299                  0.1388153
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1              0.2252285             0.1446344                 0.1253827
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                   0.1390785                      0.1444332
##   Wisconsin..Uninsured.Share
## 1                 0.08952413
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}


\CommentTok{\# Copy original data 2013}
\NormalTok{df\_pop\_2013 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2013\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2013)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names  }\CommentTok{\# to control column ordering}

\CommentTok{\# Loop through all columns ending in "..Uninsured.Population..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Population}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract the state name — everything before the first ".."}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Define the total population column and the share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total.Civilian.Noninstitutionalized.Population..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Initialize new share column with NA}
\NormalTok{    df\_pop\_2013[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate only for first row}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(df\_pop\_2013[[total\_col]][}\DecValTok{1}\NormalTok{]) }\SpecialCharTok{\&\&}\NormalTok{ df\_pop\_2013[[total\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2013[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2013[[uninsured\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{/}\NormalTok{ df\_pop\_2013[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{      df\_pop\_2013[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
\NormalTok{    \}}
    
    \CommentTok{\# Insert new column right after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
    
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total population column not found for:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder the columns}
\NormalTok{df\_pop\_2013 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2013[, new\_col\_order]}

\CommentTok{\# Preview: Show share columns for the first row}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured.Share$"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(df\_pop\_2013), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created share columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created share columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"        "Alaska..Uninsured.Share"        
##  [3] "Arizona..Uninsured.Share"        "Arkansas..Uninsured.Share"      
##  [5] "California..Uninsured.Share"     "Colorado..Uninsured.Share"      
##  [7] "Connecticut..Uninsured.Share"    "Florida..Uninsured.Share"       
##  [9] "Georgia..Uninsured.Share"        "Idaho..Uninsured.Share"         
## [11] "Illinois..Uninsured.Share"       "Indiana..Uninsured.Share"       
## [13] "Iowa..Uninsured.Share"           "Kansas..Uninsured.Share"        
## [15] "Kentucky..Uninsured.Share"       "Louisiana..Uninsured.Share"     
## [17] "Maine..Uninsured.Share"          "Maryland..Uninsured.Share"      
## [19] "Massachusetts..Uninsured.Share"  "Michigan..Uninsured.Share"      
## [21] "Minnesota..Uninsured.Share"      "Mississippi..Uninsured.Share"   
## [23] "Missouri..Uninsured.Share"       "Montana..Uninsured.Share"       
## [25] "Nebraska..Uninsured.Share"       "Nevada..Uninsured.Share"        
## [27] "New.Hampshire..Uninsured.Share"  "New.Jersey..Uninsured.Share"    
## [29] "New.Mexico..Uninsured.Share"     "New.York..Uninsured.Share"      
## [31] "North.Carolina..Uninsured.Share" "Ohio..Uninsured.Share"          
## [33] "Oklahoma..Uninsured.Share"       "Oregon..Uninsured.Share"        
## [35] "Pennsylvania..Uninsured.Share"   "South.Carolina..Uninsured.Share"
## [37] "South.Dakota..Uninsured.Share"   "Tennessee..Uninsured.Share"     
## [39] "Texas..Uninsured.Share"          "Utah..Uninsured.Share"          
## [41] "Virginia..Uninsured.Share"       "Washington..Uninsured.Share"    
## [43] "West.Virginia..Uninsured.Share"  "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2013[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1                0.1357273                0.185309                0.1714687
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                 0.1599408                    0.171819
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                  0.140953                   0.09389003
##   Florida..Uninsured.Share Georgia..Uninsured.Share Idaho..Uninsured.Share
## 1                0.2002046                0.1883814              0.1617131
##   Illinois..Uninsured.Share Indiana..Uninsured.Share Iowa..Uninsured.Share
## 1                 0.1273713                  0.13952            0.08134447
##   Kansas..Uninsured.Share Kentucky..Uninsured.Share Louisiana..Uninsured.Share
## 1               0.1227105                 0.1429577                   0.166115
##   Maine..Uninsured.Share Maryland..Uninsured.Share
## 1              0.1118673                 0.1016754
##   Massachusetts..Uninsured.Share Michigan..Uninsured.Share
## 1                     0.03729648                 0.1095126
##   Minnesota..Uninsured.Share Mississippi..Uninsured.Share
## 1                  0.0820073                    0.1708762
##   Missouri..Uninsured.Share Montana..Uninsured.Share Nebraska..Uninsured.Share
## 1                 0.1303111                0.1646484                  0.113317
##   Nevada..Uninsured.Share New.Hampshire..Uninsured.Share
## 1               0.2067596                      0.1071724
##   New.Jersey..Uninsured.Share New.Mexico..Uninsured.Share
## 1                   0.1319768                   0.1863834
##   New.York..Uninsured.Share North.Carolina..Uninsured.Share
## 1                  0.106676                       0.1564487
##   Ohio..Uninsured.Share Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1             0.1103284                 0.1765857               0.1466397
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                    0.09725265                       0.1579377
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                     0.1128435                   0.138657
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1              0.2212828             0.1399075                 0.1229951
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                   0.1398558                      0.1397775
##   Wisconsin..Uninsured.Share
## 1                 0.09133387
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}


\CommentTok{\# Copy original data 2014}
\NormalTok{df\_pop\_2014 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2014\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2014)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names  }\CommentTok{\# to control column ordering}

\CommentTok{\# Loop through all columns ending in "..Uninsured.Population..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Population}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract the state name — everything before the first ".."}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Define the total population column and the share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total.Civilian.Noninstitutionalized.Population..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Initialize new share column with NA}
\NormalTok{    df\_pop\_2014[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate only for first row}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(df\_pop\_2014[[total\_col]][}\DecValTok{1}\NormalTok{]) }\SpecialCharTok{\&\&}\NormalTok{ df\_pop\_2014[[total\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2014[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2014[[uninsured\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{/}\NormalTok{ df\_pop\_2014[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{      df\_pop\_2014[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
\NormalTok{    \}}
    
    \CommentTok{\# Insert new column right after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
    
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total population column not found for:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder the columns}
\NormalTok{df\_pop\_2014 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2014[, new\_col\_order]}

\CommentTok{\# Preview: Show share columns for the first row}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured.Share$"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(df\_pop\_2014), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created share columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created share columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"        "Alaska..Uninsured.Share"        
##  [3] "Arizona..Uninsured.Share"        "Arkansas..Uninsured.Share"      
##  [5] "California..Uninsured.Share"     "Colorado..Uninsured.Share"      
##  [7] "Connecticut..Uninsured.Share"    "Florida..Uninsured.Share"       
##  [9] "Georgia..Uninsured.Share"        "Idaho..Uninsured.Share"         
## [11] "Illinois..Uninsured.Share"       "Indiana..Uninsured.Share"       
## [13] "Iowa..Uninsured.Share"           "Kansas..Uninsured.Share"        
## [15] "Kentucky..Uninsured.Share"       "Louisiana..Uninsured.Share"     
## [17] "Maine..Uninsured.Share"          "Maryland..Uninsured.Share"      
## [19] "Massachusetts..Uninsured.Share"  "Michigan..Uninsured.Share"      
## [21] "Minnesota..Uninsured.Share"      "Mississippi..Uninsured.Share"   
## [23] "Missouri..Uninsured.Share"       "Montana..Uninsured.Share"       
## [25] "Nebraska..Uninsured.Share"       "Nevada..Uninsured.Share"        
## [27] "New.Hampshire..Uninsured.Share"  "New.Jersey..Uninsured.Share"    
## [29] "New.Mexico..Uninsured.Share"     "New.York..Uninsured.Share"      
## [31] "North.Carolina..Uninsured.Share" "Ohio..Uninsured.Share"          
## [33] "Oklahoma..Uninsured.Share"       "Oregon..Uninsured.Share"        
## [35] "Pennsylvania..Uninsured.Share"   "South.Carolina..Uninsured.Share"
## [37] "South.Dakota..Uninsured.Share"   "Tennessee..Uninsured.Share"     
## [39] "Texas..Uninsured.Share"          "Utah..Uninsured.Share"          
## [41] "Virginia..Uninsured.Share"       "Washington..Uninsured.Share"    
## [43] "West.Virginia..Uninsured.Share"  "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2014[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1                0.1214857               0.1720716                 0.136391
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                 0.1177511                   0.1244655
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                   0.10304                   0.06929666
##   Florida..Uninsured.Share Georgia..Uninsured.Share Idaho..Uninsured.Share
## 1                0.1657101                0.1583123              0.1355995
##   Illinois..Uninsured.Share Indiana..Uninsured.Share Iowa..Uninsured.Share
## 1                0.09745612                 0.119403            0.06166868
##   Kansas..Uninsured.Share Kentucky..Uninsured.Share Louisiana..Uninsured.Share
## 1               0.1024364                0.08456971                  0.1477168
##   Maine..Uninsured.Share Maryland..Uninsured.Share
## 1              0.1014676                0.07870881
##   Massachusetts..Uninsured.Share Michigan..Uninsured.Share
## 1                     0.03280003                0.08539242
##   Minnesota..Uninsured.Share Mississippi..Uninsured.Share
## 1                 0.05877077                    0.1448983
##   Missouri..Uninsured.Share Montana..Uninsured.Share Nebraska..Uninsured.Share
## 1                 0.1166063                0.1421672                0.09667559
##   Nevada..Uninsured.Share New.Hampshire..Uninsured.Share
## 1               0.1520756                      0.0918165
##   New.Jersey..Uninsured.Share New.Mexico..Uninsured.Share
## 1                   0.1093211                   0.1452173
##   New.York..Uninsured.Share North.Carolina..Uninsured.Share
## 1                0.08700504                       0.1308485
##   Ohio..Uninsured.Share Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1            0.08363724                  0.153638              0.09733686
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                    0.08460563                       0.1355285
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                    0.09807362                  0.1203831
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1              0.1905727             0.1253378                 0.1088908
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                   0.0924043                     0.08572436
##   Wisconsin..Uninsured.Share
## 1                 0.07348165
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}


\CommentTok{\# Copy original data 2015}
\NormalTok{df\_pop\_2015 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2015\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2015)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names  }\CommentTok{\# to control column ordering}

\CommentTok{\# Loop through all columns ending in "..Uninsured.Population..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Population}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract the state name — everything before the first ".."}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Define the total population column and the share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total.Civilian.Noninstitutionalized.Population..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Initialize new share column with NA}
\NormalTok{    df\_pop\_2015[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate only for first row}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(df\_pop\_2015[[total\_col]][}\DecValTok{1}\NormalTok{]) }\SpecialCharTok{\&\&}\NormalTok{ df\_pop\_2015[[total\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2015[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2015[[uninsured\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{/}\NormalTok{ df\_pop\_2015[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{      df\_pop\_2015[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
\NormalTok{    \}}
    
    \CommentTok{\# Insert new column right after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
    
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total population column not found for:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder the columns}
\NormalTok{df\_pop\_2015 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2015[, new\_col\_order]}

\CommentTok{\# Preview: Show share columns for the first row}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured.Share$"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(df\_pop\_2015), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created share columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created share columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"        "Alaska..Uninsured.Share"        
##  [3] "Arizona..Uninsured.Share"        "Arkansas..Uninsured.Share"      
##  [5] "California..Uninsured.Share"     "Colorado..Uninsured.Share"      
##  [7] "Connecticut..Uninsured.Share"    "Florida..Uninsured.Share"       
##  [9] "Georgia..Uninsured.Share"        "Idaho..Uninsured.Share"         
## [11] "Illinois..Uninsured.Share"       "Indiana..Uninsured.Share"       
## [13] "Iowa..Uninsured.Share"           "Kansas..Uninsured.Share"        
## [15] "Kentucky..Uninsured.Share"       "Louisiana..Uninsured.Share"     
## [17] "Maine..Uninsured.Share"          "Maryland..Uninsured.Share"      
## [19] "Massachusetts..Uninsured.Share"  "Michigan..Uninsured.Share"      
## [21] "Minnesota..Uninsured.Share"      "Mississippi..Uninsured.Share"   
## [23] "Missouri..Uninsured.Share"       "Montana..Uninsured.Share"       
## [25] "Nebraska..Uninsured.Share"       "Nevada..Uninsured.Share"        
## [27] "New.Hampshire..Uninsured.Share"  "New.Jersey..Uninsured.Share"    
## [29] "New.Mexico..Uninsured.Share"     "New.York..Uninsured.Share"      
## [31] "North.Carolina..Uninsured.Share" "Ohio..Uninsured.Share"          
## [33] "Oklahoma..Uninsured.Share"       "Oregon..Uninsured.Share"        
## [35] "Pennsylvania..Uninsured.Share"   "South.Carolina..Uninsured.Share"
## [37] "South.Dakota..Uninsured.Share"   "Tennessee..Uninsured.Share"     
## [39] "Texas..Uninsured.Share"          "Utah..Uninsured.Share"          
## [41] "Virginia..Uninsured.Share"       "Washington..Uninsured.Share"    
## [43] "West.Virginia..Uninsured.Share"  "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2015[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1                0.1012893               0.1486028                0.1083402
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                0.09491035                  0.08582917
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                0.08060276                    0.0595034
##   Florida..Uninsured.Share Georgia..Uninsured.Share Idaho..Uninsured.Share
## 1                 0.133343                0.1385068              0.1104888
##   Illinois..Uninsured.Share Indiana..Uninsured.Share Iowa..Uninsured.Share
## 1                0.07100149               0.09627842            0.05030822
##   Kansas..Uninsured.Share Kentucky..Uninsured.Share Louisiana..Uninsured.Share
## 1              0.09140122                0.06020847                  0.1194612
##   Maine..Uninsured.Share Maryland..Uninsured.Share
## 1             0.08404615                0.06587079
##   Massachusetts..Uninsured.Share Michigan..Uninsured.Share
## 1                     0.02817363                0.06081482
##   Minnesota..Uninsured.Share Mississippi..Uninsured.Share
## 1                 0.04512386                    0.1269262
##   Missouri..Uninsured.Share Montana..Uninsured.Share Nebraska..Uninsured.Share
## 1                0.09768298                0.1164756                0.08239485
##   Nevada..Uninsured.Share New.Hampshire..Uninsured.Share
## 1               0.1227896                     0.06344916
##   New.Jersey..Uninsured.Share New.Mexico..Uninsured.Share
## 1                   0.0871367                   0.1092739
##   New.York..Uninsured.Share North.Carolina..Uninsured.Share
## 1                0.07059297                       0.1118943
##   Ohio..Uninsured.Share Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1            0.06522235                 0.1390244              0.07022141
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                    0.06364794                       0.1089763
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                     0.1021141                   0.102738
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1              0.1709948             0.1047932                0.09142927
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                  0.06622038                     0.05953275
##   Wisconsin..Uninsured.Share
## 1                 0.05660928
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}


\CommentTok{\# Copy original data 2016}
\NormalTok{df\_pop\_2016 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2016\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2016)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names  }\CommentTok{\# to control column ordering}

\CommentTok{\# Loop through all columns ending in "..Uninsured.Population..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Population}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract the state name — everything before the first ".."}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Define the total population column and the share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total.Civilian.Noninstitutionalized.Population..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Initialize new share column with NA}
\NormalTok{    df\_pop\_2016[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate only for first row}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(df\_pop\_2016[[total\_col]][}\DecValTok{1}\NormalTok{]) }\SpecialCharTok{\&\&}\NormalTok{ df\_pop\_2016[[total\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2016[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2016[[uninsured\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{/}\NormalTok{ df\_pop\_2016[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{      df\_pop\_2016[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
\NormalTok{    \}}
    
    \CommentTok{\# Insert new column right after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
    
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total population column not found for:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder the columns}
\NormalTok{df\_pop\_2016 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2016[, new\_col\_order]}

\CommentTok{\# Preview: Show share columns for the first row}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured.Share$"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(df\_pop\_2016), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created share columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created share columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"        "Alaska..Uninsured.Share"        
##  [3] "Arizona..Uninsured.Share"        "Arkansas..Uninsured.Share"      
##  [5] "California..Uninsured.Share"     "Colorado..Uninsured.Share"      
##  [7] "Connecticut..Uninsured.Share"    "Florida..Uninsured.Share"       
##  [9] "Georgia..Uninsured.Share"        "Idaho..Uninsured.Share"         
## [11] "Illinois..Uninsured.Share"       "Indiana..Uninsured.Share"       
## [13] "Iowa..Uninsured.Share"           "Kansas..Uninsured.Share"        
## [15] "Kentucky..Uninsured.Share"       "Louisiana..Uninsured.Share"     
## [17] "Maine..Uninsured.Share"          "Maryland..Uninsured.Share"      
## [19] "Massachusetts..Uninsured.Share"  "Michigan..Uninsured.Share"      
## [21] "Minnesota..Uninsured.Share"      "Mississippi..Uninsured.Share"   
## [23] "Missouri..Uninsured.Share"       "Montana..Uninsured.Share"       
## [25] "Nebraska..Uninsured.Share"       "Nevada..Uninsured.Share"        
## [27] "New.Hampshire..Uninsured.Share"  "New.Jersey..Uninsured.Share"    
## [29] "New.Mexico..Uninsured.Share"     "New.York..Uninsured.Share"      
## [31] "North.Carolina..Uninsured.Share" "Ohio..Uninsured.Share"          
## [33] "Oklahoma..Uninsured.Share"       "Oregon..Uninsured.Share"        
## [35] "Pennsylvania..Uninsured.Share"   "South.Carolina..Uninsured.Share"
## [37] "South.Dakota..Uninsured.Share"   "Tennessee..Uninsured.Share"     
## [39] "Texas..Uninsured.Share"          "Utah..Uninsured.Share"          
## [41] "Virginia..Uninsured.Share"       "Washington..Uninsured.Share"    
## [43] "West.Virginia..Uninsured.Share"  "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2016[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1               0.09095042               0.1400687               0.09982028
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                0.07898893                  0.07336489
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                0.07521312                    0.0488529
##   Florida..Uninsured.Share Georgia..Uninsured.Share Idaho..Uninsured.Share
## 1                0.1253665                0.1293944              0.1010965
##   Illinois..Uninsured.Share Indiana..Uninsured.Share Iowa..Uninsured.Share
## 1                0.06470498               0.08115837            0.04257308
##   Kansas..Uninsured.Share Kentucky..Uninsured.Share Louisiana..Uninsured.Share
## 1              0.08733288                0.05129318                  0.1026466
##   Maine..Uninsured.Share Maryland..Uninsured.Share
## 1             0.08045641                0.06136299
##   Massachusetts..Uninsured.Share Michigan..Uninsured.Share
## 1                     0.02539468                0.05367536
##   Minnesota..Uninsured.Share Mississippi..Uninsured.Share
## 1                 0.04118051                    0.1183862
##   Missouri..Uninsured.Share Montana..Uninsured.Share Nebraska..Uninsured.Share
## 1                0.08899202               0.08118266                0.08551256
##   Nevada..Uninsured.Share New.Hampshire..Uninsured.Share
## 1               0.1137111                     0.05900414
##   New.Jersey..Uninsured.Share New.Mexico..Uninsured.Share
## 1                  0.07976959                  0.09173456
##   New.York..Uninsured.Share North.Carolina..Uninsured.Share
## 1                0.06063357                       0.1042796
##   Ohio..Uninsured.Share Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1            0.05627068                 0.1377274              0.06234435
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                    0.05632031                      0.09995622
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                    0.08744142                 0.09047163
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1              0.1659744            0.08754625                0.08718548
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                  0.05958873                     0.05319177
##   Wisconsin..Uninsured.Share
## 1                 0.05260606
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}

\CommentTok{\#something went wrong here with 2017 and 2018, so the function that worked is much more below as the column names in the years of 2017{-}2018 were named differently than the years before}

\CommentTok{\# Copy original data 2017}
\NormalTok{df\_pop\_2017 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2017\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2017)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names  }\CommentTok{\# to control column ordering}

\CommentTok{\# Loop through all columns ending in "..Uninsured.Population..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Population}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract the state name — everything before the first ".."}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Define the total population column and the share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total.Civilian.Noninstitutionalized.Population..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Initialize new share column with NA}
\NormalTok{    df\_pop\_2017[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate only for first row}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(df\_pop\_2017[[total\_col]][}\DecValTok{1}\NormalTok{]) }\SpecialCharTok{\&\&}\NormalTok{ df\_pop\_2017[[total\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2017[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2017[[uninsured\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{/}\NormalTok{ df\_pop\_2017[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{      df\_pop\_2017[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
\NormalTok{    \}}
    
    \CommentTok{\# Insert new column right after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
    
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total population column not found for:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}

\CommentTok{\# Reorder the columns}
\NormalTok{df\_pop\_2017 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2017[, new\_col\_order]}

\CommentTok{\# Preview: Show share columns for the first row}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured.Share$"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(df\_pop\_2017), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created share columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created share columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## character(0)
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2017[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## data frame with 0 columns and 1 row
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Copy original data 2018}
\NormalTok{df\_pop\_2018}\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2018\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2018)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names  }\CommentTok{\# to control column ordering}

\CommentTok{\# Loop through all columns ending in "..Uninsured.Population..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Population}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract the state name — everything before the first ".."}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Define the total population column and the share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total.Civilian.Noninstitutionalized.Population..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Initialize new share column with NA}
\NormalTok{    df\_pop\_2018[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate only for first row}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(df\_pop\_2018[[total\_col]][}\DecValTok{1}\NormalTok{]) }\SpecialCharTok{\&\&}\NormalTok{ df\_pop\_2018[[total\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2018[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2018[[uninsured\_col]][}\DecValTok{1}\NormalTok{] }\SpecialCharTok{/}\NormalTok{ df\_pop\_2018[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{      df\_pop\_2018[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
\NormalTok{    \}}
    
    \CommentTok{\# Insert new column right after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
    
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total population column not found for:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}

\CommentTok{\# Reorder the columns}
\NormalTok{df\_pop\_2018 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2018[, new\_col\_order]}

\CommentTok{\# Preview: Show share columns for the first row}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured.Share$"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(df\_pop\_2018), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created share columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created share columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## character(0)
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2018[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## data frame with 0 columns and 1 row
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{View}\NormalTok{(df\_pop\_2017)}
\FunctionTok{View}\NormalTok{(df\_pop\_2016)}
\FunctionTok{View}\NormalTok{(df\_pop\_2018)}

\CommentTok{\#I have seen that it did not work for the years of 2017 and 2018 so I have to see what the names of the columns are}
\FunctionTok{grep}\NormalTok{(}\StringTok{"Alabama"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2017\_cleaned), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "Alabama..Total..Estimate"           "Alabama..Total.Uninsured..Estimate"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{grep}\NormalTok{(}\StringTok{"Alabama"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(dataset\_uninsured\_population\_2018\_cleaned), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "Alabama..Total..Estimate"           "Alabama..Total.Uninsured..Estimate"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#Here I am starting again from 2017}

\CommentTok{\# Make a working copy of your data 2017}
\NormalTok{df\_pop\_2017 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2017\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2017)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names}

\CommentTok{\# Loop through all columns ending with "..Total.Uninsured..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Total}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract state (everything before first "..")}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Construct matching total population column and new share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \CommentTok{\# Check if the total population column exists}
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Create new share column, default NA}
\NormalTok{    df\_pop\_2017[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate share only for first row}
\NormalTok{    total\_val }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2017[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    uninsured\_val }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2017[[uninsured\_col]][}\DecValTok{1}\NormalTok{]}
    
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(total\_val) }\SpecialCharTok{\&\&}\NormalTok{ total\_val }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2017[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ uninsured\_val }\SpecialCharTok{/}\NormalTok{ total\_val}
\NormalTok{    \}}
    
    \CommentTok{\# Insert share column after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total column not found for"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder columns}
\NormalTok{df\_pop\_2017 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2017[, new\_col\_order]}

\CommentTok{\# Show all created share columns}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Share$"}\NormalTok{, }\FunctionTok{names}\NormalTok{(df\_pop\_2017), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"        "Alaska..Uninsured.Share"        
##  [3] "Arizona..Uninsured.Share"        "Arkansas..Uninsured.Share"      
##  [5] "California..Uninsured.Share"     "Colorado..Uninsured.Share"      
##  [7] "Connecticut..Uninsured.Share"    "Florida..Uninsured.Share"       
##  [9] "Georgia..Uninsured.Share"        "Idaho..Uninsured.Share"         
## [11] "Illinois..Uninsured.Share"       "Indiana..Uninsured.Share"       
## [13] "Iowa..Uninsured.Share"           "Kansas..Uninsured.Share"        
## [15] "Kentucky..Uninsured.Share"       "Louisiana..Uninsured.Share"     
## [17] "Maine..Uninsured.Share"          "Maryland..Uninsured.Share"      
## [19] "Massachusetts..Uninsured.Share"  "Michigan..Uninsured.Share"      
## [21] "Minnesota..Uninsured.Share"      "Mississippi..Uninsured.Share"   
## [23] "Missouri..Uninsured.Share"       "Montana..Uninsured.Share"       
## [25] "Nebraska..Uninsured.Share"       "Nevada..Uninsured.Share"        
## [27] "New.Hampshire..Uninsured.Share"  "New.Jersey..Uninsured.Share"    
## [29] "New.Mexico..Uninsured.Share"     "New.York..Uninsured.Share"      
## [31] "North.Carolina..Uninsured.Share" "Ohio..Uninsured.Share"          
## [33] "Oklahoma..Uninsured.Share"       "Oregon..Uninsured.Share"        
## [35] "Pennsylvania..Uninsured.Share"   "South.Carolina..Uninsured.Share"
## [37] "South.Dakota..Uninsured.Share"   "Tennessee..Uninsured.Share"     
## [39] "Texas..Uninsured.Share"          "Utah..Uninsured.Share"          
## [41] "Virginia..Uninsured.Share"       "Washington..Uninsured.Share"    
## [43] "West.Virginia..Uninsured.Share"  "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2017[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1               0.09365284               0.1365526                0.1005758
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                0.07859547                   0.0716214
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                0.07509462                   0.05479847
##   Florida..Uninsured.Share Georgia..Uninsured.Share Idaho..Uninsured.Share
## 1                0.1294156                0.1342736              0.1014663
##   Illinois..Uninsured.Share Indiana..Uninsured.Share Iowa..Uninsured.Share
## 1                0.06808625               0.08166315            0.04706917
##   Kansas..Uninsured.Share Kentucky..Uninsured.Share Louisiana..Uninsured.Share
## 1              0.08733883                0.05381611                 0.08354311
##   Maine..Uninsured.Share Maryland..Uninsured.Share
## 1             0.08101016                 0.0613637
##   Massachusetts..Uninsured.Share Michigan..Uninsured.Share
## 1                     0.02797105                0.05171328
##   Minnesota..Uninsured.Share Mississippi..Uninsured.Share
## 1                 0.04393917                    0.1204304
##   Missouri..Uninsured.Share Montana..Uninsured.Share Nebraska..Uninsured.Share
## 1                0.09137354               0.08464118                0.08289077
##   Nevada..Uninsured.Share New.Hampshire..Uninsured.Share
## 1               0.1122881                     0.05815703
##   New.Jersey..Uninsured.Share New.Mexico..Uninsured.Share
## 1                  0.07728989                  0.09102658
##   New.York..Uninsured.Share North.Carolina..Uninsured.Share
## 1                 0.0567594                       0.1068421
##   Ohio..Uninsured.Share Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1             0.0597309                  0.141636              0.06844328
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                    0.05492597                       0.1098832
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                    0.09079084                  0.0951436
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1              0.1730424            0.09158774                0.08831244
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                  0.06111198                     0.06092967
##   Wisconsin..Uninsured.Share
## 1                 0.05405416
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#now it worked and I can work further on 2018{-}2023 except for 2020 as we do not have the data of that}

\CommentTok{\# Make a working copy of your data 2018}
\NormalTok{df\_pop\_2018 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2018\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2018)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names}

\CommentTok{\# Loop through all columns ending with "..Total.Uninsured..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Total}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract state (everything before first "..")}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Construct matching total population column and new share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \CommentTok{\# Check if the total population column exists}
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Create new share column, default NA}
\NormalTok{    df\_pop\_2018[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate share only for first row}
\NormalTok{    total\_val }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2018[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    uninsured\_val }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2018[[uninsured\_col]][}\DecValTok{1}\NormalTok{]}
    
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(total\_val) }\SpecialCharTok{\&\&}\NormalTok{ total\_val }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2018[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ uninsured\_val }\SpecialCharTok{/}\NormalTok{ total\_val}
\NormalTok{    \}}
    
    \CommentTok{\# Insert share column after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total column not found for"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder columns}
\NormalTok{df\_pop\_2018 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2018[, new\_col\_order]}

\CommentTok{\# Show all created share columns}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Share$"}\NormalTok{, }\FunctionTok{names}\NormalTok{(df\_pop\_2018), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"        "Alaska..Uninsured.Share"        
##  [3] "Arizona..Uninsured.Share"        "Arkansas..Uninsured.Share"      
##  [5] "California..Uninsured.Share"     "Colorado..Uninsured.Share"      
##  [7] "Connecticut..Uninsured.Share"    "Florida..Uninsured.Share"       
##  [9] "Georgia..Uninsured.Share"        "Idaho..Uninsured.Share"         
## [11] "Illinois..Uninsured.Share"       "Indiana..Uninsured.Share"       
## [13] "Iowa..Uninsured.Share"           "Kansas..Uninsured.Share"        
## [15] "Kentucky..Uninsured.Share"       "Louisiana..Uninsured.Share"     
## [17] "Maine..Uninsured.Share"          "Maryland..Uninsured.Share"      
## [19] "Massachusetts..Uninsured.Share"  "Michigan..Uninsured.Share"      
## [21] "Minnesota..Uninsured.Share"      "Mississippi..Uninsured.Share"   
## [23] "Missouri..Uninsured.Share"       "Montana..Uninsured.Share"       
## [25] "Nebraska..Uninsured.Share"       "Nevada..Uninsured.Share"        
## [27] "New.Hampshire..Uninsured.Share"  "New.Jersey..Uninsured.Share"    
## [29] "New.Mexico..Uninsured.Share"     "New.York..Uninsured.Share"      
## [31] "North.Carolina..Uninsured.Share" "Ohio..Uninsured.Share"          
## [33] "Oklahoma..Uninsured.Share"       "Oregon..Uninsured.Share"        
## [35] "Pennsylvania..Uninsured.Share"   "South.Carolina..Uninsured.Share"
## [37] "South.Dakota..Uninsured.Share"   "Tennessee..Uninsured.Share"     
## [39] "Texas..Uninsured.Share"          "Utah..Uninsured.Share"          
## [41] "Virginia..Uninsured.Share"       "Washington..Uninsured.Share"    
## [43] "West.Virginia..Uninsured.Share"  "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2018[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1                0.1000519               0.1264009                0.1061569
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                0.08227825                  0.07233594
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                0.07523842                   0.05304523
##   Florida..Uninsured.Share Georgia..Uninsured.Share Idaho..Uninsured.Share
## 1                0.1299526                0.1365446              0.1111173
##   Illinois..Uninsured.Share Indiana..Uninsured.Share Iowa..Uninsured.Share
## 1                0.06961274               0.08268831            0.04723342
##   Kansas..Uninsured.Share Kentucky..Uninsured.Share Louisiana..Uninsured.Share
## 1              0.08769696                0.05643334                 0.07975324
##   Maine..Uninsured.Share Maryland..Uninsured.Share
## 1             0.08024475                0.06002089
##   Massachusetts..Uninsured.Share Michigan..Uninsured.Share
## 1                      0.0276552                0.05405769
##   Minnesota..Uninsured.Share Mississippi..Uninsured.Share
## 1                 0.04400399                    0.1212982
##   Missouri..Uninsured.Share Montana..Uninsured.Share Nebraska..Uninsured.Share
## 1                0.09415649               0.08216126                0.08294648
##   Nevada..Uninsured.Share New.Hampshire..Uninsured.Share
## 1               0.1121165                     0.05749024
##   New.Jersey..Uninsured.Share New.Mexico..Uninsured.Share
## 1                   0.0743981                   0.0952338
##   New.York..Uninsured.Share North.Carolina..Uninsured.Share
## 1                0.05394253                       0.1072345
##   Ohio..Uninsured.Share Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1            0.06459064                 0.1419926              0.07060989
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                    0.05548705                       0.1046962
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                     0.0979727                  0.1012128
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1              0.1771363            0.09419778                0.08811778
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                  0.06425818                     0.06421398
##   Wisconsin..Uninsured.Share
## 1                 0.05455078
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}


\CommentTok{\# Make a working copy of your data 2019}
\NormalTok{df\_pop\_2019 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2019\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2019)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names}

\CommentTok{\# Loop through all columns ending with "..Total.Uninsured..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Total}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract state (everything before first "..")}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Construct matching total population column and new share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \CommentTok{\# Check if the total population column exists}
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Create new share column, default NA}
\NormalTok{    df\_pop\_2019[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate share only for first row}
\NormalTok{    total\_val }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2019[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    uninsured\_val }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2019[[uninsured\_col]][}\DecValTok{1}\NormalTok{]}
    
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(total\_val) }\SpecialCharTok{\&\&}\NormalTok{ total\_val }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2019[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ uninsured\_val }\SpecialCharTok{/}\NormalTok{ total\_val}
\NormalTok{    \}}
    
    \CommentTok{\# Insert share column after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total column not found for"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder columns}
\NormalTok{df\_pop\_2019 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2019[, new\_col\_order]}

\CommentTok{\# Show all created share columns}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Share$"}\NormalTok{, }\FunctionTok{names}\NormalTok{(df\_pop\_2019), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"        "Alaska..Uninsured.Share"        
##  [3] "Arizona..Uninsured.Share"        "Arkansas..Uninsured.Share"      
##  [5] "California..Uninsured.Share"     "Colorado..Uninsured.Share"      
##  [7] "Connecticut..Uninsured.Share"    "Florida..Uninsured.Share"       
##  [9] "Georgia..Uninsured.Share"        "Idaho..Uninsured.Share"         
## [11] "Illinois..Uninsured.Share"       "Indiana..Uninsured.Share"       
## [13] "Iowa..Uninsured.Share"           "Kansas..Uninsured.Share"        
## [15] "Kentucky..Uninsured.Share"       "Louisiana..Uninsured.Share"     
## [17] "Maine..Uninsured.Share"          "Maryland..Uninsured.Share"      
## [19] "Massachusetts..Uninsured.Share"  "Michigan..Uninsured.Share"      
## [21] "Minnesota..Uninsured.Share"      "Mississippi..Uninsured.Share"   
## [23] "Missouri..Uninsured.Share"       "Montana..Uninsured.Share"       
## [25] "Nebraska..Uninsured.Share"       "Nevada..Uninsured.Share"        
## [27] "New.Hampshire..Uninsured.Share"  "New.Jersey..Uninsured.Share"    
## [29] "New.Mexico..Uninsured.Share"     "New.York..Uninsured.Share"      
## [31] "North.Carolina..Uninsured.Share" "Ohio..Uninsured.Share"          
## [33] "Oklahoma..Uninsured.Share"       "Oregon..Uninsured.Share"        
## [35] "Pennsylvania..Uninsured.Share"   "South.Carolina..Uninsured.Share"
## [37] "South.Dakota..Uninsured.Share"   "Tennessee..Uninsured.Share"     
## [39] "Texas..Uninsured.Share"          "Utah..Uninsured.Share"          
## [41] "Virginia..Uninsured.Share"       "Washington..Uninsured.Share"    
## [43] "West.Virginia..Uninsured.Share"  "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2019[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1               0.09723165               0.1221173                0.1128459
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                 0.0914637                  0.07697906
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                0.08005986                   0.05895016
##   Florida..Uninsured.Share Georgia..Uninsured.Share Idaho..Uninsured.Share
## 1                0.1316055                0.1341428              0.1083312
##   Illinois..Uninsured.Share Indiana..Uninsured.Share Iowa..Uninsured.Share
## 1                0.07393202               0.08722513            0.05014984
##   Kansas..Uninsured.Share Kentucky..Uninsured.Share Louisiana..Uninsured.Share
## 1              0.09200826                0.06444007                 0.08904859
##   Maine..Uninsured.Share Maryland..Uninsured.Share
## 1             0.08024643                 0.0600135
##   Massachusetts..Uninsured.Share Michigan..Uninsured.Share
## 1                     0.02991936                 0.0578107
##   Minnesota..Uninsured.Share Mississippi..Uninsured.Share
## 1                 0.04884795                    0.1297496
##   Missouri..Uninsured.Share Montana..Uninsured.Share Nebraska..Uninsured.Share
## 1                 0.1002716               0.08270425                0.08293356
##   Nevada..Uninsured.Share New.Hampshire..Uninsured.Share
## 1               0.1142238                     0.06254871
##   New.Jersey..Uninsured.Share New.Mexico..Uninsured.Share
## 1                  0.07889048                  0.09964263
##   New.York..Uninsured.Share North.Carolina..Uninsured.Share
## 1                 0.0523884                       0.1125642
##   Ohio..Uninsured.Share Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1            0.06580679                 0.1427902              0.07171733
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                    0.05768603                       0.1084807
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                     0.1018523                  0.1014459
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1              0.1835548            0.09654436                 0.0792765
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                  0.06616207                     0.06676534
##   Wisconsin..Uninsured.Share
## 1                 0.05714326
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}


\CommentTok{\# Make a working copy of your data 2021}
\NormalTok{df\_pop\_2021 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2021\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2021)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names}

\CommentTok{\# Loop through all columns ending with "..Total.Uninsured..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Total}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract state (everything before first "..")}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Construct matching total population column and new share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \CommentTok{\# Check if the total population column exists}
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Create new share column, default NA}
\NormalTok{    df\_pop\_2021[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate share only for first row}
\NormalTok{    total\_val }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2021[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    uninsured\_val }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2021[[uninsured\_col]][}\DecValTok{1}\NormalTok{]}
    
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(total\_val) }\SpecialCharTok{\&\&}\NormalTok{ total\_val }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2021[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ uninsured\_val }\SpecialCharTok{/}\NormalTok{ total\_val}
\NormalTok{    \}}
    
    \CommentTok{\# Insert share column after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total column not found for"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder columns}
\NormalTok{df\_pop\_2021 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2021[, new\_col\_order]}

\CommentTok{\# Show all created share columns}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Share$"}\NormalTok{, }\FunctionTok{names}\NormalTok{(df\_pop\_2021), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"        "Alaska..Uninsured.Share"        
##  [3] "Arizona..Uninsured.Share"        "Arkansas..Uninsured.Share"      
##  [5] "California..Uninsured.Share"     "Colorado..Uninsured.Share"      
##  [7] "Connecticut..Uninsured.Share"    "Florida..Uninsured.Share"       
##  [9] "Georgia..Uninsured.Share"        "Idaho..Uninsured.Share"         
## [11] "Illinois..Uninsured.Share"       "Indiana..Uninsured.Share"       
## [13] "Iowa..Uninsured.Share"           "Kansas..Uninsured.Share"        
## [15] "Kentucky..Uninsured.Share"       "Louisiana..Uninsured.Share"     
## [17] "Maine..Uninsured.Share"          "Maryland..Uninsured.Share"      
## [19] "Massachusetts..Uninsured.Share"  "Michigan..Uninsured.Share"      
## [21] "Minnesota..Uninsured.Share"      "Mississippi..Uninsured.Share"   
## [23] "Missouri..Uninsured.Share"       "Montana..Uninsured.Share"       
## [25] "Nebraska..Uninsured.Share"       "Nevada..Uninsured.Share"        
## [27] "New.Hampshire..Uninsured.Share"  "New.Jersey..Uninsured.Share"    
## [29] "New.Mexico..Uninsured.Share"     "New.York..Uninsured.Share"      
## [31] "North.Carolina..Uninsured.Share" "Ohio..Uninsured.Share"          
## [33] "Oklahoma..Uninsured.Share"       "Oregon..Uninsured.Share"        
## [35] "Pennsylvania..Uninsured.Share"   "South.Carolina..Uninsured.Share"
## [37] "South.Dakota..Uninsured.Share"   "Tennessee..Uninsured.Share"     
## [39] "Texas..Uninsured.Share"          "Utah..Uninsured.Share"          
## [41] "Virginia..Uninsured.Share"       "Washington..Uninsured.Share"    
## [43] "West.Virginia..Uninsured.Share"  "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2021[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1               0.09854925               0.1140533                0.1067932
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                0.09178368                   0.0700475
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                0.07967111                    0.0515895
##   Florida..Uninsured.Share Georgia..Uninsured.Share Idaho..Uninsured.Share
## 1                 0.121051                0.1263088             0.08829542
##   Illinois..Uninsured.Share Indiana..Uninsured.Share Iowa..Uninsured.Share
## 1                0.07003409                0.0751946            0.04800897
##   Kansas..Uninsured.Share Kentucky..Uninsured.Share Louisiana..Uninsured.Share
## 1              0.09161134                0.05663162                 0.07646627
##   Maine..Uninsured.Share Maryland..Uninsured.Share
## 1             0.05720865                0.06094254
##   Massachusetts..Uninsured.Share Michigan..Uninsured.Share
## 1                     0.02496419                0.04978955
##   Minnesota..Uninsured.Share Mississippi..Uninsured.Share
## 1                 0.04455518                    0.1188529
##   Missouri..Uninsured.Share Montana..Uninsured.Share Nebraska..Uninsured.Share
## 1                 0.0941563               0.08216107                0.07106947
##   Nevada..Uninsured.Share New.Hampshire..Uninsured.Share
## 1               0.1164494                     0.05135849
##   New.Jersey..Uninsured.Share New.Mexico..Uninsured.Share
## 1                  0.07166672                  0.09970751
##   New.York..Uninsured.Share North.Carolina..Uninsured.Share
## 1                0.05200696                        0.104206
##   Ohio..Uninsured.Share Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1            0.06525657                 0.1377177              0.06072583
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                     0.0549479                       0.1003831
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                    0.09491317                 0.09983068
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1               0.179725            0.09027935                0.06825086
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                  0.06406261                     0.06083364
##   Wisconsin..Uninsured.Share
## 1                 0.05356075
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}


\CommentTok{\# Make a working copy of your data 2022}
\NormalTok{df\_pop\_2022 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2022\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2022)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names}

\CommentTok{\# Loop through all columns ending with "..Total.Uninsured..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Total}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract state (everything before first "..")}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Construct matching total population column and new share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \CommentTok{\# Check if the total population column exists}
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Create new share column, default NA}
\NormalTok{    df\_pop\_2022[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate share only for first row}
\NormalTok{    total\_val }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2022[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    uninsured\_val }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2022[[uninsured\_col]][}\DecValTok{1}\NormalTok{]}
    
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(total\_val) }\SpecialCharTok{\&\&}\NormalTok{ total\_val }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2022[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ uninsured\_val }\SpecialCharTok{/}\NormalTok{ total\_val}
\NormalTok{    \}}
    
    \CommentTok{\# Insert share column after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total column not found for"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder columns}
\NormalTok{df\_pop\_2022 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2022[, new\_col\_order]}

\CommentTok{\# Show all created share columns}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Share$"}\NormalTok{, }\FunctionTok{names}\NormalTok{(df\_pop\_2022), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"        "Alaska..Uninsured.Share"        
##  [3] "Arizona..Uninsured.Share"        "Arkansas..Uninsured.Share"      
##  [5] "California..Uninsured.Share"     "Colorado..Uninsured.Share"      
##  [7] "Connecticut..Uninsured.Share"    "Florida..Uninsured.Share"       
##  [9] "Georgia..Uninsured.Share"        "Idaho..Uninsured.Share"         
## [11] "Illinois..Uninsured.Share"       "Indiana..Uninsured.Share"       
## [13] "Iowa..Uninsured.Share"           "Kansas..Uninsured.Share"        
## [15] "Kentucky..Uninsured.Share"       "Louisiana..Uninsured.Share"     
## [17] "Maine..Uninsured.Share"          "Maryland..Uninsured.Share"      
## [19] "Massachusetts..Uninsured.Share"  "Michigan..Uninsured.Share"      
## [21] "Minnesota..Uninsured.Share"      "Mississippi..Uninsured.Share"   
## [23] "Missouri..Uninsured.Share"       "Montana..Uninsured.Share"       
## [25] "Nebraska..Uninsured.Share"       "Nevada..Uninsured.Share"        
## [27] "New.Hampshire..Uninsured.Share"  "New.Jersey..Uninsured.Share"    
## [29] "New.Mexico..Uninsured.Share"     "New.York..Uninsured.Share"      
## [31] "North.Carolina..Uninsured.Share" "Ohio..Uninsured.Share"          
## [33] "Oklahoma..Uninsured.Share"       "Oregon..Uninsured.Share"        
## [35] "Pennsylvania..Uninsured.Share"   "South.Carolina..Uninsured.Share"
## [37] "South.Dakota..Uninsured.Share"   "Tennessee..Uninsured.Share"     
## [39] "Texas..Uninsured.Share"          "Utah..Uninsured.Share"          
## [41] "Virginia..Uninsured.Share"       "Washington..Uninsured.Share"    
## [43] "West.Virginia..Uninsured.Share"  "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2022[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1               0.08765301               0.1097246                0.1032432
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                0.08429496                  0.06464148
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                0.07114232                   0.05162027
##   Florida..Uninsured.Share Georgia..Uninsured.Share Idaho..Uninsured.Share
## 1                0.1117466                0.1167391             0.08192574
##   Illinois..Uninsured.Share Indiana..Uninsured.Share Iowa..Uninsured.Share
## 1                0.06551264               0.06967824            0.04464984
##   Kansas..Uninsured.Share Kentucky..Uninsured.Share Louisiana..Uninsured.Share
## 1              0.08590088                0.05576913                 0.06946939
##   Maine..Uninsured.Share Maryland..Uninsured.Share
## 1              0.0656296                 0.0606604
##   Massachusetts..Uninsured.Share Michigan..Uninsured.Share
## 1                     0.02423125                0.04546727
##   Minnesota..Uninsured.Share Mississippi..Uninsured.Share
## 1                 0.04497038                    0.1084825
##   Missouri..Uninsured.Share Montana..Uninsured.Share Nebraska..Uninsured.Share
## 1                0.08577111               0.08259932                0.06679221
##   Nevada..Uninsured.Share New.Hampshire..Uninsured.Share
## 1               0.1110718                     0.04895806
##   New.Jersey..Uninsured.Share New.Mexico..Uninsured.Share
## 1                  0.06840516                  0.08217944
##   New.York..Uninsured.Share North.Carolina..Uninsured.Share
## 1                0.04851316                      0.09284511
##   Ohio..Uninsured.Share Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1            0.05890281                 0.1172645              0.06011162
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                    0.05324045                      0.09073011
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                    0.08057311                 0.09308205
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1              0.1658447            0.08128566                0.06452529
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                  0.06098285                     0.05919066
##   Wisconsin..Uninsured.Share
## 1                  0.0519327
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}

\CommentTok{\# Make a working copy of your data 2023}
\NormalTok{df\_pop\_2023 }\OtherTok{\textless{}{-}}\NormalTok{ dataset\_uninsured\_population\_2023\_cleaned}
\NormalTok{col\_names }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(df\_pop\_2023)}
\NormalTok{new\_col\_order }\OtherTok{\textless{}{-}}\NormalTok{ col\_names}

\CommentTok{\# Loop through all columns ending with "..Total.Uninsured..Estimate"}
\NormalTok{uninsured\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Total}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Estimate$"}\NormalTok{, col\_names, }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ (uninsured\_col }\ControlFlowTok{in}\NormalTok{ uninsured\_cols) \{}
  \CommentTok{\# Extract state (everything before first "..")}
\NormalTok{  state }\OtherTok{\textless{}{-}} \FunctionTok{strsplit}\NormalTok{(uninsured\_col, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)[[}\DecValTok{1}\NormalTok{]][}\DecValTok{1}\NormalTok{]}
  
  \CommentTok{\# Construct matching total population column and new share column}
\NormalTok{  total\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Total..Estimate"}\NormalTok{)}
\NormalTok{  share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, }\StringTok{"..Uninsured.Share"}\NormalTok{)}
  
  \FunctionTok{cat}\NormalTok{(}\StringTok{"Processing:"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
  
  \CommentTok{\# Check if the total population column exists}
  \ControlFlowTok{if}\NormalTok{ (total\_col }\SpecialCharTok{\%in\%}\NormalTok{ col\_names) \{}
    \CommentTok{\# Create new share column, default NA}
\NormalTok{    df\_pop\_2023[[share\_col]] }\OtherTok{\textless{}{-}} \ConstantTok{NA}
    
    \CommentTok{\# Calculate share only for first row}
\NormalTok{    total\_val }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2023[[total\_col]][}\DecValTok{1}\NormalTok{]}
\NormalTok{    uninsured\_val }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2023[[uninsured\_col]][}\DecValTok{1}\NormalTok{]}
    
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(total\_val) }\SpecialCharTok{\&\&}\NormalTok{ total\_val }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{) \{}
\NormalTok{      df\_pop\_2023[[share\_col]][}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}}\NormalTok{ uninsured\_val }\SpecialCharTok{/}\NormalTok{ total\_val}
\NormalTok{    \}}
    
    \CommentTok{\# Insert share column after the uninsured column}
\NormalTok{    pos }\OtherTok{\textless{}{-}} \FunctionTok{match}\NormalTok{(uninsured\_col, new\_col\_order)}
\NormalTok{    new\_col\_order }\OtherTok{\textless{}{-}} \FunctionTok{append}\NormalTok{(new\_col\_order, share\_col, }\AttributeTok{after =}\NormalTok{ pos)}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{cat}\NormalTok{(}\StringTok{"⚠️ Total column not found for"}\NormalTok{, state, }\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Processing: Alabama 
## Processing: Alaska 
## Processing: Arizona 
## Processing: Arkansas 
## Processing: California 
## Processing: Colorado 
## Processing: Connecticut 
## Processing: Florida 
## Processing: Georgia 
## Processing: Idaho 
## Processing: Illinois 
## Processing: Indiana 
## Processing: Iowa 
## Processing: Kansas 
## Processing: Kentucky 
## Processing: Louisiana 
## Processing: Maine 
## Processing: Maryland 
## Processing: Massachusetts 
## Processing: Michigan 
## Processing: Minnesota 
## Processing: Mississippi 
## Processing: Missouri 
## Processing: Montana 
## Processing: Nebraska 
## Processing: Nevada 
## Processing: New.Hampshire 
## Processing: New.Jersey 
## Processing: New.Mexico 
## Processing: New.York 
## Processing: North.Carolina 
## Processing: Ohio 
## Processing: Oklahoma 
## Processing: Oregon 
## Processing: Pennsylvania 
## Processing: South.Carolina 
## Processing: South.Dakota 
## Processing: Tennessee 
## Processing: Texas 
## Processing: Utah 
## Processing: Virginia 
## Processing: Washington 
## Processing: West.Virginia 
## Processing: Wisconsin
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Reorder columns}
\NormalTok{df\_pop\_2023 }\OtherTok{\textless{}{-}}\NormalTok{ df\_pop\_2023[, new\_col\_order]}

\CommentTok{\# Show all created share columns}
\NormalTok{share\_cols }\OtherTok{\textless{}{-}} \FunctionTok{grep}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Uninsured}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.Share$"}\NormalTok{, }\FunctionTok{names}\NormalTok{(df\_pop\_2023), }\AttributeTok{value =} \ConstantTok{TRUE}\NormalTok{)}
\FunctionTok{cat}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{✅ Created columns:}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ✅ Created columns:
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(share\_cols)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "Alabama..Uninsured.Share"        "Alaska..Uninsured.Share"        
##  [3] "Arizona..Uninsured.Share"        "Arkansas..Uninsured.Share"      
##  [5] "California..Uninsured.Share"     "Colorado..Uninsured.Share"      
##  [7] "Connecticut..Uninsured.Share"    "Florida..Uninsured.Share"       
##  [9] "Georgia..Uninsured.Share"        "Idaho..Uninsured.Share"         
## [11] "Illinois..Uninsured.Share"       "Indiana..Uninsured.Share"       
## [13] "Iowa..Uninsured.Share"           "Kansas..Uninsured.Share"        
## [15] "Kentucky..Uninsured.Share"       "Louisiana..Uninsured.Share"     
## [17] "Maine..Uninsured.Share"          "Maryland..Uninsured.Share"      
## [19] "Massachusetts..Uninsured.Share"  "Michigan..Uninsured.Share"      
## [21] "Minnesota..Uninsured.Share"      "Mississippi..Uninsured.Share"   
## [23] "Missouri..Uninsured.Share"       "Montana..Uninsured.Share"       
## [25] "Nebraska..Uninsured.Share"       "Nevada..Uninsured.Share"        
## [27] "New.Hampshire..Uninsured.Share"  "New.Jersey..Uninsured.Share"    
## [29] "New.Mexico..Uninsured.Share"     "New.York..Uninsured.Share"      
## [31] "North.Carolina..Uninsured.Share" "Ohio..Uninsured.Share"          
## [33] "Oklahoma..Uninsured.Share"       "Oregon..Uninsured.Share"        
## [35] "Pennsylvania..Uninsured.Share"   "South.Carolina..Uninsured.Share"
## [37] "South.Dakota..Uninsured.Share"   "Tennessee..Uninsured.Share"     
## [39] "Texas..Uninsured.Share"          "Utah..Uninsured.Share"          
## [41] "Virginia..Uninsured.Share"       "Washington..Uninsured.Share"    
## [43] "West.Virginia..Uninsured.Share"  "Wisconsin..Uninsured.Share"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{print}\NormalTok{(df\_pop\_2023[}\DecValTok{1}\NormalTok{, share\_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Alabama..Uninsured.Share Alaska..Uninsured.Share Arizona..Uninsured.Share
## 1               0.08490298               0.1038765                0.0993637
##   Arkansas..Uninsured.Share California..Uninsured.Share
## 1                0.08920865                  0.06386153
##   Colorado..Uninsured.Share Connecticut..Uninsured.Share
## 1                0.06703853                   0.05740886
##   Florida..Uninsured.Share Georgia..Uninsured.Share Idaho..Uninsured.Share
## 1                0.1069023                0.1138529             0.08854436
##   Illinois..Uninsured.Share Indiana..Uninsured.Share Iowa..Uninsured.Share
## 1                0.06160363               0.06853826             0.0502048
##   Kansas..Uninsured.Share Kentucky..Uninsured.Share Louisiana..Uninsured.Share
## 1               0.0835362                0.05430606                 0.06918709
##   Maine..Uninsured.Share Maryland..Uninsured.Share
## 1             0.05912624                0.06264785
##   Massachusetts..Uninsured.Share Michigan..Uninsured.Share
## 1                     0.02582464                 0.0451428
##   Minnesota..Uninsured.Share Mississippi..Uninsured.Share
## 1                 0.04187831                    0.1034669
##   Missouri..Uninsured.Share Montana..Uninsured.Share Nebraska..Uninsured.Share
## 1                0.07520097               0.08433544                0.06121848
##   Nevada..Uninsured.Share New.Hampshire..Uninsured.Share
## 1               0.1080003                     0.04734072
##   New.Jersey..Uninsured.Share New.Mexico..Uninsured.Share
## 1                  0.07190929                  0.09082783
##   New.York..Uninsured.Share North.Carolina..Uninsured.Share
## 1                0.04843565                       0.0923095
##   Ohio..Uninsured.Share Oklahoma..Uninsured.Share Oregon..Uninsured.Share
## 1            0.06134679                 0.1135415              0.05492359
##   Pennsylvania..Uninsured.Share South.Carolina..Uninsured.Share
## 1                    0.05418139                      0.09100654
##   South.Dakota..Uninsured.Share Tennessee..Uninsured.Share
## 1                     0.0826191                 0.09305311
##   Texas..Uninsured.Share Utah..Uninsured.Share Virginia..Uninsured.Share
## 1              0.1637895            0.07969644                0.06401962
##   Washington..Uninsured.Share West.Virginia..Uninsured.Share
## 1                  0.06252503                     0.05916401
##   Wisconsin..Uninsured.Share
## 1                 0.04856452
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}

\CommentTok{\#Now we have the new variable in the seperate datasets and now we are going to merge these yearly datasets into 1 dataset}

\CommentTok{\# Define years}
\NormalTok{years\_early }\OtherTok{\textless{}{-}} \DecValTok{2010}\SpecialCharTok{:}\DecValTok{2016}
\NormalTok{years\_late }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{2017}\SpecialCharTok{:}\DecValTok{2019}\NormalTok{, }\DecValTok{2021}\SpecialCharTok{:}\DecValTok{2023}\NormalTok{)}

\CommentTok{\# Function to process one year of data}
\NormalTok{process\_df }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(df, year, is\_early) \{}
\NormalTok{  label\_col }\OtherTok{\textless{}{-}} \FunctionTok{names}\NormalTok{(df)[}\DecValTok{1}\NormalTok{]}
\NormalTok{  state\_cols }\OtherTok{\textless{}{-}} \FunctionTok{names}\NormalTok{(df)[}\SpecialCharTok{!}\FunctionTok{names}\NormalTok{(df) }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(label\_col, }\StringTok{"Unnamed: 0"}\NormalTok{)]}
\NormalTok{  states }\OtherTok{\textless{}{-}} \FunctionTok{unique}\NormalTok{(}\FunctionTok{str\_extract}\NormalTok{(state\_cols, }\StringTok{"\^{}[\^{}.]+"}\NormalTok{))}
  
  \CommentTok{\# Set correct suffixes depending on year}
  \ControlFlowTok{if}\NormalTok{ (is\_early) \{}
\NormalTok{    pop\_suffix }\OtherTok{\textless{}{-}} \StringTok{"..Total.Civilian.Noninstitutionalized.Population..Estimate"}
\NormalTok{    unins\_suffix }\OtherTok{\textless{}{-}} \StringTok{"..Uninsured.Population..Estimate"}
\NormalTok{    share\_suffix }\OtherTok{\textless{}{-}} \StringTok{"..Uninsured.Share"}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{    pop\_suffix }\OtherTok{\textless{}{-}} \StringTok{"..Total..Estimate"}
\NormalTok{    unins\_suffix }\OtherTok{\textless{}{-}} \StringTok{"..Total.Uninsured..Estimate"}
\NormalTok{    share\_suffix }\OtherTok{\textless{}{-}} \StringTok{"..Uninsured.Share"}
\NormalTok{  \}}
  
  \CommentTok{\# Extract for each state}
\NormalTok{  rows }\OtherTok{\textless{}{-}} \FunctionTok{lapply}\NormalTok{(states, }\ControlFlowTok{function}\NormalTok{(state) \{}
\NormalTok{    pop\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, pop\_suffix)}
\NormalTok{    unins\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, unins\_suffix)}
\NormalTok{    share\_col }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(state, share\_suffix)}
    
    \CommentTok{\# Get only total population row}
\NormalTok{    total\_row }\OtherTok{\textless{}{-}}\NormalTok{ df }\SpecialCharTok{\%\textgreater{}\%}
      \FunctionTok{filter}\NormalTok{(}\FunctionTok{str\_trim}\NormalTok{(.data[[label\_col]]) }\SpecialCharTok{==} \StringTok{"Total population"}\NormalTok{)}
    
    \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{nrow}\NormalTok{(total\_row) }\SpecialCharTok{==} \DecValTok{0} \SpecialCharTok{||} \SpecialCharTok{!}\NormalTok{(pop\_col }\SpecialCharTok{\%in\%} \FunctionTok{names}\NormalTok{(df))) }\FunctionTok{return}\NormalTok{(}\ConstantTok{NULL}\NormalTok{)}
    
    \FunctionTok{tibble}\NormalTok{(}
      \AttributeTok{state =}\NormalTok{ state,}
      \AttributeTok{year =}\NormalTok{ year,}
      \AttributeTok{total\_population =} \FunctionTok{as.numeric}\NormalTok{(total\_row[[pop\_col]]),}
      \AttributeTok{total\_uninsured =} \FunctionTok{as.numeric}\NormalTok{(total\_row[[unins\_col]]),}
      \AttributeTok{uninsured\_share =} \FunctionTok{as.numeric}\NormalTok{(total\_row[[share\_col]])}
\NormalTok{    )}
\NormalTok{  \})}
  
  \FunctionTok{bind\_rows}\NormalTok{(rows)}
\NormalTok{\}}

\CommentTok{\# Process all early years}
\NormalTok{dfs\_early }\OtherTok{\textless{}{-}} \FunctionTok{mget}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(}\StringTok{"df\_pop\_"}\NormalTok{, years\_early))}
\NormalTok{panel\_early }\OtherTok{\textless{}{-}} \FunctionTok{map2\_dfr}\NormalTok{(dfs\_early, years\_early, }\SpecialCharTok{\textasciitilde{}}\FunctionTok{process\_df}\NormalTok{(.x, .y, }\AttributeTok{is\_early =} \ConstantTok{TRUE}\NormalTok{))}

\CommentTok{\# Process all late years}
\NormalTok{dfs\_late }\OtherTok{\textless{}{-}} \FunctionTok{mget}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(}\StringTok{"df\_pop\_"}\NormalTok{, years\_late))}
\CommentTok{\#panel\_late \textless{}{-} map2\_dfr(dfs\_late, years\_late, \textasciitilde{}process\_df(.x, .y, is\_early = FALSE))}

\NormalTok{early\_states }\OtherTok{\textless{}{-}} \FunctionTok{bind\_rows}\NormalTok{(}
\NormalTok{  dfs\_early, }\AttributeTok{.id =} \StringTok{"year"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{pivot\_longer}\NormalTok{(}
    \SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(year, }\StringTok{"Label (Grouping)"}\NormalTok{),}
    \AttributeTok{names\_to =} \StringTok{"tmp"}\NormalTok{,}
    \AttributeTok{values\_to =} \StringTok{"value"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{separate}\NormalTok{(tmp,}
           \AttributeTok{into =} \FunctionTok{c}\NormalTok{(}\StringTok{"state"}\NormalTok{, }\StringTok{"series"}\NormalTok{, }\StringTok{"measure"}\NormalTok{),}
           \AttributeTok{sep =} \StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{,}
           \AttributeTok{remove =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Expected 3 pieces. Missing pieces filled with `NA` in 2835 rows [3, 6, 9, 12,
## 15, 18, 21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, ...].
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{late\_states }\OtherTok{\textless{}{-}} \FunctionTok{bind\_rows}\NormalTok{(}
\NormalTok{  dfs\_late, }\AttributeTok{.id =} \StringTok{"year"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{pivot\_longer}\NormalTok{(}
    \SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(year, }\StringTok{"Label (Grouping)"}\NormalTok{),}
    \AttributeTok{names\_to =} \StringTok{"tmp"}\NormalTok{,}
    \AttributeTok{values\_to =} \StringTok{"value"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{separate}\NormalTok{(tmp,}
           \AttributeTok{into =} \FunctionTok{c}\NormalTok{(}\StringTok{"state"}\NormalTok{, }\StringTok{"series"}\NormalTok{, }\StringTok{"measure"}\NormalTok{),}
           \AttributeTok{sep =} \StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{,}
           \AttributeTok{remove =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Expected 3 pieces. Missing pieces filled with `NA` in 2376 rows [3, 6, 9, 12,
## 15, 18, 21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, ...].
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# View}

\NormalTok{all\_states }\OtherTok{\textless{}{-}} \FunctionTok{rbind}\NormalTok{(late\_states, early\_states)}

\FunctionTok{head}\NormalTok{(all\_states)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 6
##   year        `Label (Grouping)`                    state series measure   value
##   <chr>       <chr>                                 <chr> <chr>  <chr>     <dbl>
## 1 df_pop_2017 Total civilian noninstitutionalized ~ Alab~ Total  Estima~ 4.79e+6
## 2 df_pop_2017 Total civilian noninstitutionalized ~ Alab~ Total~ Estima~ 4.49e+5
## 3 df_pop_2017 Total civilian noninstitutionalized ~ Alab~ Unins~ <NA>    9.37e-2
## 4 df_pop_2017 Total civilian noninstitutionalized ~ Alas~ Total  Estima~ 7.16e+5
## 5 df_pop_2017 Total civilian noninstitutionalized ~ Alas~ Total~ Estima~ 9.78e+4
## 6 df_pop_2017 Total civilian noninstitutionalized ~ Alas~ Unins~ <NA>    1.37e-1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}

\CommentTok{\#cleaning out df\_pop from the column of years to only remain the year numbers}

\FunctionTok{unique}\NormalTok{(all\_states}\SpecialCharTok{$}\NormalTok{year)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "df_pop_2017" "df_pop_2018" "df_pop_2019" "df_pop_2021" "df_pop_2022"
##  [6] "df_pop_2023" "df_pop_2010" "df_pop_2011" "df_pop_2012" "df_pop_2013"
## [11] "df_pop_2014" "df_pop_2015" "df_pop_2016"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{all\_states}\SpecialCharTok{$}\NormalTok{year }\OtherTok{\textless{}{-}} \FunctionTok{str\_remove}\NormalTok{(all\_states}\SpecialCharTok{$}\NormalTok{year, }\StringTok{"df\_pop\_"}\NormalTok{)}

\CommentTok{\#Now I am coercing the string into numeric so plotting becomes easier}

\NormalTok{all\_states}\SpecialCharTok{$}\NormalTok{year }\OtherTok{\textless{}{-}} \FunctionTok{as.numeric}\NormalTok{(all\_states}\SpecialCharTok{$}\NormalTok{year)}
\FunctionTok{str}\NormalTok{(all\_states)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## tibble [15,633 x 6] (S3: tbl_df/tbl/data.frame)
##  $ year            : num [1:15633] 2017 2017 2017 2017 2017 ...
##  $ Label (Grouping): chr [1:15633] "Total civilian noninstitutionalized population" "Total civilian noninstitutionalized population" "Total civilian noninstitutionalized population" "Total civilian noninstitutionalized population" ...
##  $ state           : chr [1:15633] "Alabama" "Alabama" "Alabama" "Alaska" ...
##  $ series          : chr [1:15633] "Total" "Total.Uninsured" "Uninsured.Share" "Total" ...
##  $ measure         : chr [1:15633] "Estimate" "Estimate" NA "Estimate" ...
##  $ value           : num [1:15633] 4.79e+06 4.49e+05 9.37e-02 7.16e+05 9.78e+04 ...
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DocumentationTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}
\CommentTok{\#Here I am multiplying the uninsured share by 100, such that they are representing percentages}
\NormalTok{all\_states\_100 }\OtherTok{=}\NormalTok{ all\_states }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{value =} 
           \FunctionTok{ifelse}\NormalTok{(}\FunctionTok{grepl}\NormalTok{(}\StringTok{"Uninsured.Share"}\NormalTok{,}
\NormalTok{                        series), value}\SpecialCharTok{*}\DecValTok{100}\NormalTok{, value))}

\CommentTok{\#This is the dataset for the Uninsured Population we can use for the visualizations}
\end{Highlighting}
\end{Shaded}

\subsection{datacleaning Annual GDP Table and The Creation of The New
Variable: Annual Real GDP Growth per year and
state}\label{datacleaning-annual-gdp-table-and-the-creation-of-the-new-variable-annual-real-gdp-growth-per-year-and-state}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#Here I am making a new variable which is the GDP growth rate of the states}

\CommentTok{\#renaming the table}
\NormalTok{table\_GDP }\OtherTok{=}\NormalTok{ Table\_GDP\_absolute\_values\_Table\_3\_}

\CommentTok{\#class coercion of double to numeric of all columns but the first column}
\NormalTok{table\_GDP[, }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{] }\OtherTok{=} \FunctionTok{lapply}\NormalTok{(table\_GDP[, }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{], as.numeric)}

\CommentTok{\#checking the class}
\FunctionTok{sapply}\NormalTok{(table\_GDP, class)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##     GeoName        2009        2010        2011        2012        2013 
## "character"   "numeric"   "numeric"   "numeric"   "numeric"   "numeric" 
##        2014        2015        2016        2017        2018        2019 
##   "numeric"   "numeric"   "numeric"   "numeric"   "numeric"   "numeric" 
##        2021        2022        2023 
##   "numeric"   "numeric"   "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#yes, all the numbers are now numeric instead of the first column with the names of the states}


\CommentTok{\# Pivot longer}
\NormalTok{gdp\_long }\OtherTok{\textless{}{-}}\NormalTok{ table\_GDP }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{pivot\_longer}\NormalTok{(}
    \AttributeTok{cols =} \SpecialCharTok{{-}}\NormalTok{GeoName,}
    \AttributeTok{names\_to =} \StringTok{"year"}\NormalTok{,}
    \AttributeTok{values\_to =} \StringTok{"gdp"}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{year =} \FunctionTok{as.integer}\NormalTok{(year))}

\FunctionTok{View}\NormalTok{(table\_GDP)}
\FunctionTok{View}\NormalTok{(gdp\_long)}

\CommentTok{\# Calculate GDP growth rate}
\NormalTok{gdp\_growth }\OtherTok{\textless{}{-}}\NormalTok{ gdp\_long }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(GeoName) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{arrange}\NormalTok{(year) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{growth\_rate =}\NormalTok{ (gdp }\SpecialCharTok{{-}} \FunctionTok{lag}\NormalTok{(gdp)) }\SpecialCharTok{/} \FunctionTok{lag}\NormalTok{(gdp) }\SpecialCharTok{*} \DecValTok{100}\NormalTok{)}

\FunctionTok{View}\NormalTok{(gdp\_growth)}

\CommentTok{\#delete rows from 2009}
\NormalTok{gdp\_growth }\OtherTok{=}\NormalTok{ gdp\_growth[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{45}\NormalTok{), ]}
\end{Highlighting}
\end{Shaded}

\section{Part 3 -- Visualize and Analyze the
Data}\label{part-3-visualize-and-analyze-the-data}

\subsection{3.1 Create Initial
Visualizations}\label{create-initial-visualizations}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# ggplot(dataset, aes(x = age, fill = insurance\_status)) +}
\CommentTok{\#   geom\_histogram(binwidth = 5) +}
\CommentTok{\#   labs(title = "Insurance Status by Age", x = "Age", y = "Count")}
\end{Highlighting}
\end{Shaded}

\subsection{3.2 Identify Trends and
Patterns}\label{identify-trends-and-patterns}

The uninsured rate is higher among younger adults, Hispanic and Black
populations, and those with lower income or educational attainment.

\section{Part 4 -- Communicate
Findings}\label{part-4-communicate-findings}

\subsection{4.1 Summarize Key Insights}\label{summarize-key-insights}

Our analysis highlights systemic inequalities in access to health
insurance. Despite overall improvements since the ACA, millions remain
uninsured.

\subsection{4.2 Propose Solutions or Policy
Recommendations}\label{propose-solutions-or-policy-recommendations}

Potential solutions include:

\begin{itemize}
\tightlist
\item
  Expanding Medicaid in all states
\item
  Decoupling health insurance from employment
\item
  Increasing subsidies for marketplace plans
\end{itemize}

\section{Appendix}\label{appendix}

\subsection{A.1 References}\label{a.1-references}

\begin{itemize}
\tightlist
\item
  U.S. Census Bureau. (2022). Health Insurance Coverage in the United
  States.
\item
  Kaiser Family Foundation. (2023). Key Facts about the Uninsured
  Population.
\end{itemize}

\subsection{A.2 Session Info}\label{a.2-session-info}

\end{document}
